<!DOCTYPE html>

<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸ¦ ì€í–‰ç‹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        width: 100vw; height: 100vh; overflow: hidden; font-size: 16px;
    }

    .screen { width: 100vw; height: 100vh; display: flex; flex-direction: column; }
    .header { background: #1f2937; color: white; padding: 1rem; height: 15vh; display: flex; flex-direction: column; justify-content: space-between; }
    .bank-area { background: linear-gradient(180deg, #dbeafe 0%, #bfdbfe 100%); height: 25vh; position: relative; overflow: hidden; }
    .content { flex: 1; overflow-y: auto; padding: 1rem; background: white; }
    
    .btn { background: #2563eb; color: white; border: none; padding: 0.75rem 1rem; border-radius: 0.5rem; font-weight: 600; cursor: pointer; }
    .btn:active { transform: translateY(1px); }
    .btn-secondary { background: #6b7280; }
    
    .input { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem; }
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
    .card { background: #f3f4f6; padding: 1rem; border-radius: 0.5rem; }
    
    .blue { background: #dbeafe; color: #1e40af; }
    .green { background: #dcfce7; color: #166534; }
    .yellow { background: #fef3c7; color: #92400e; }
    
    .clock { position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; background: white; border: 3px solid #ca8a04; border-radius: 50%; }
    .hand { position: absolute; background: #374151; transform-origin: bottom center; border-radius: 2px; }
    .hour-hand { width: 2px; height: 15px; top: 50%; left: 50%; transform: translate(-50%, -100%); }
    .minute-hand { width: 1px; height: 20px; top: 50%; left: 50%; transform: translate(-50%, -100%); }
    
    .teller { position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%); display: flex; gap: 1rem; }
    .teller-booth { width: 40px; height: 25px; background: #92400e; border: 2px solid #451a03; border-radius: 0.25rem; position: relative; }
    .teller-person { position: absolute; top: -2rem; left: 50%; transform: translateX(-50%); font-size: 20px; }
    
    .customers { position: absolute; bottom: 1rem; left: 0; width: 100%; height: 30px; }
    .customer { position: absolute; bottom: 0; font-size: 18px; }
    
    .sign { position: absolute; top: 1rem; left: 50%; transform: translateX(-50%); background: #1e40af; color: white; padding: 0.5rem 1rem; border-radius: 0.5rem; border: 2px solid #1d4ed8; }
    .rate-board { position: absolute; top: 1rem; right: 1rem; background: white; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.75rem; }
    
    .slider { width: 100%; height: 1.5rem; border-radius: 0.5rem; background: #d1d5db; outline: none; cursor: pointer; -webkit-appearance: none; }
    .slider::-webkit-slider-thumb { -webkit-appearance: none; height: 2rem; width: 2rem; border-radius: 50%; background: #2563eb; cursor: pointer; border: 2px solid #1e40af; }
    
    .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.75); display: flex; align-items: center; justify-content: center; padding: 1rem; z-index: 50; }
    .modal-content { background: white; padding: 1.5rem; border-radius: 0.75rem; width: 100%; max-width: 400px; }
    .popup { background: #1e3a8a; color: white; border: 2px solid #60a5fa; border-radius: 0.75rem; }
    
    @keyframes bounce { 0%, 20%, 53%, 80%, 100% { transform: translateX(-50%) translateY(0); } 40%, 43% { transform: translateX(-50%) translateY(-10px); } 70% { transform: translateX(-50%) translateY(-5px); } }
    .bounce { animation: bounce 1s infinite; }
    
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .pulse { animation: pulse 2s infinite; }
    
    .mb-2 { margin-bottom: 0.5rem; } .mb-3 { margin-bottom: 0.75rem; } .mb-4 { margin-bottom: 1rem; }
    .text-sm { font-size: 0.875rem; } .text-lg { font-size: 1.125rem; } .text-xl { font-size: 1.25rem; }
    .font-bold { font-weight: 700; } .text-center { text-align: center; }
    .flex { display: flex; } .justify-between { justify-content: space-between; } .items-center { align-items: center; } .gap-2 { gap: 0.5rem; }
    .w-full { width: 100%; } .hidden { display: none; }
</style>
```

</head>
<body>
    <div id="app"></div>

```
<script>
    let game = {
        bankName: "", capital: 50000000000, profit: 0, depositRate: 2.5, loanRate: 5.0,
        depositCustomers: 100, loanCustomers: 50, depositBalance: 5000000000, loanBalance: 5000000000,
        advertising: 1000000, round: 1, year: 1, month: 1, time: 9, isOpen: true, started: false,
        fscWarnings: [], fscWatchList: false, boardPressure: 0, defaultRate: 0.05,
        capitalRatio: 12.5, badLoanRatio: 2.1, assetYield: 3.5, assetPortfolio: {
            bonds: 60, stocks: 20, loans: 15, cash: 5  // ìì‚° ë°°ë¶„ ë¹„ìœ¨ (%)
        },
        fscSanctions: {
            rateControl: false,     // ê¸ˆë¦¬ í†µì œ
            loanLimit: false,       // ëŒ€ì¶œ í•œë„ ì œí•œ
            dividendBan: false,     // ë°°ë‹¹ê¸ˆì§€
            operationSuspend: false // ì˜ì—…ì •ì§€
        },
        boardActions: {
            ceoWarning: 0,          // CEO ê²½ê³  íšŸìˆ˜
            strategyForced: false,   // ê°•ì œ ì „ëµ ë³€ê²½
            budgetCut: false,       // ì˜ˆì‚° ì‚­ê°
            mergeTalk: false        // ì¸ìˆ˜í•©ë³‘ ë…¼ì˜
        }
    };

    let ui = {
        showDayEnd: false, showInput: false, inputType: '', inputValue: '', inputLabel: '',
        customers: [], tellerBusy: [false, false, false], dayResult: null, event: null, reactions: [],
        fscAlert: null, boardAlert: null
    };

    let timers = { game: null, customer: null };

    function fmt(amount) {
        if (amount >= 1000000000000) return (amount / 1000000000000).toFixed(1) + 'ì¡°ì›';
        if (amount >= 100000000) return (amount / 100000000).toFixed(0) + 'ì–µì›';
        if (amount >= 10000) return (amount / 10000).toFixed(0) + 'ë§Œì›';
        return Math.round(amount / 1000) + 'ì²œì›';
    }

    function fmtTime(time) {
        const h = Math.floor(time), m = Math.round((time % 1) * 60);
        return h.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0');
    }

    function startGame() { game.started = true; startTimers(); render(); }

    function startTimers() {
        clearTimers();
        if (game.started && game.isOpen) {
            timers.game = setInterval(() => {
                game.time += 0.3;
                if (game.time >= 18) { game.time = 18; game.isOpen = false; ui.showDayEnd = true; clearTimers(); render(); }
                updateTime();
            }, 1000);

            timers.customer = setInterval(() => {
                if (Math.random() < 0.4) {
                    ui.customers.push({ id: Date.now(), type: Math.random() < 0.6 ? 'deposit' : 'loan', pos: -50, speed: 2 + Math.random() * 3 });
                    if (ui.customers.length > 6) ui.customers.shift();
                }
                ui.customers = ui.customers.map(c => ({...c, pos: c.pos + c.speed})).filter(c => c.pos < window.innerWidth + 50);
                ui.tellerBusy = [Math.random() < 0.3, Math.random() < 0.3, Math.random() < 0.3];
                updateCustomers();
            }, 500);
        }
    }

    function clearTimers() { if (timers.game) clearInterval(timers.game); if (timers.customer) clearInterval(timers.customer); }

    function advanceTime() {
        if (game.started && game.isOpen) {
            game.time += 1;
            if (game.time >= 18) { game.time = 18; game.isOpen = false; ui.showDayEnd = true; clearTimers(); }
            updateTime(); render();
        }
    }

    function updateTime() {
        const timeEl = document.getElementById('time');
        if (timeEl) {
            timeEl.textContent = 'ğŸ• ' + fmtTime(game.time);
            timeEl.className = game.time >= 17.5 ? 'text-red-300 pulse' : game.time >= 17 ? 'text-yellow-300' : 'text-green-300';
        }
        updateClock();
    }

    function updateClock() {
        const hour = game.time % 12, minute = (game.time % 1) * 60;
        const hourAngle = (hour * 30) + (minute * 0.5), minuteAngle = minute * 6;
        const hourHand = document.getElementById('hour-hand'), minuteHand = document.getElementById('minute-hand');
        if (hourHand) hourHand.style.transform = 'translate(-50%, -100%) rotate(' + hourAngle + 'deg)';
        if (minuteHand) minuteHand.style.transform = 'translate(-50%, -100%) rotate(' + minuteAngle + 'deg)';
    }

    function updateCustomers() {
        const area = document.getElementById('customers');
        if (!area) return;
        area.innerHTML = '';
        ui.customers.forEach(customer => {
            const el = document.createElement('div');
            el.className = 'customer'; el.style.left = customer.pos + 'px';
            el.innerHTML = customer.type === 'deposit' ? 'ğŸ‘¨â€ğŸ’¼' : 'ğŸ‘©â€ğŸ’¼';
            area.appendChild(el);
        });
        for (let i = 0; i < 3; i++) {
            const teller = document.getElementById('teller-' + i);
            if (teller) teller.className = 'teller-person ' + (ui.tellerBusy[i] ? 'bounce' : '');
        }
    }

    function processDay() {
        const events = [
            {name: "ê²½ê¸° í˜¸í™©", effect: "ê³ ê° ìˆ˜ +25%, ìì‚°ìˆ˜ìµ +0.5%p", mult: 1.25, defaultChange: -0.3, yieldChange: 0.5}, 
            {name: "ê²½ê¸° ì¹¨ì²´", effect: "ê³ ê° ìˆ˜ -20%, ìì‚°ìˆ˜ìµ -0.3%p", mult: 0.8, defaultChange: 0.5, yieldChange: -0.3}, 
            {name: "ì•ˆì •ì  ì‹œì¥", effect: "ë³€í™” ì—†ìŒ", mult: 1.0, defaultChange: 0, yieldChange: 0},
            {name: "ë¶€ë™ì‚° ë²„ë¸”", effect: "ëŒ€ì¶œ ê¸‰ì¦, ì£¼ì‹ìˆ˜ìµ ìƒìŠ¹", loanMult: 1.4, defaultChange: 0.8, yieldChange: 0.3},
            {name: "ê¸ˆë¦¬ ì¸ìƒ", effect: "ì˜ˆê¸ˆâ†‘ ëŒ€ì¶œâ†“, ì±„ê¶Œìˆ˜ìµ í•˜ë½", depositMult: 1.3, loanMult: 0.7, defaultChange: 0.2, yieldChange: -0.2},
            {name: "ì£¼ì‹ì‹œì¥ ê¸‰ë½", effect: "ì£¼ì‹ì†ì‹¤, ì•ˆì „ìì‚° ì„ í˜¸", mult: 0.9, yieldChange: -0.8},
            {name: "ì±„ê¶Œì‹œì¥ í˜¸í™©", effect: "ì±„ê¶Œìˆ˜ìµ ìƒìŠ¹", mult: 1.0, yieldChange: 0.4}
        ];
        ui.event = events[Math.floor(Math.random() * events.length)];
        
        // ê¸°ë³¸ ê³„ì‚°
        const depositMult = ui.event.depositMult || ui.event.mult || 1.0;
        const loanMult = ui.event.loanMult || ui.event.mult || 1.0;
        const newDeposit = Math.floor(game.depositCustomers * depositMult);
        const newLoan = Math.floor(game.loanCustomers * loanMult);
        
        // ìì‚°ìš´ìš©ìˆ˜ìµë¥  ë³€ë™ (ì‹œì¥ ìƒí™©ì— ë”°ë¼)
        const marketYieldChange = (ui.event.yieldChange || 0) + (Math.random() - 0.5) * 0.4;
        game.assetYield = Math.max(1.0, Math.min(8.0, game.assetYield + marketYieldChange));
        
        // ì—°ì²´ìœ¨ ë³€ë™
        game.defaultRate = Math.max(0.5, Math.min(15, game.defaultRate + (Math.random() - 0.5) * 2 + (ui.event.defaultChange || 0)));
        
        // ìˆ˜ì‹ ìê¸ˆ ì—…ë°ì´íŠ¸
        game.depositBalance = newDeposit * 50000000; // í‰ê·  ì˜ˆê¸ˆì•¡ 5ì²œë§Œì›
        
        // ì†ìµ ê³„ì‚°
        const loanIncome = game.loanBalance * (game.loanRate / 100);  // ëŒ€ì¶œì´ì ìˆ˜ìµ
        const assetIncome = game.depositBalance * (game.assetYield / 100);  // ìì‚°ìš´ìš© ìˆ˜ìµ (í•µì‹¬!)
        const totalIncome = loanIncome + assetIncome;
        
        const depositCost = game.depositBalance * (game.depositRate / 100);  // ì˜ˆê¸ˆì´ì ë¹„ìš©
        const operatingCost = game.advertising + (game.capital * 0.01);  // ìš´ì˜ë¹„ìš©
        const defaultLoss = game.loanBalance * (game.defaultRate / 100);  // ì—°ì²´ì†ì‹¤
        const totalCost = depositCost + operatingCost + defaultLoss;
        
        const netIncome = totalIncome - totalCost;

        // BIS ìê¸°ìë³¸ë¹„ìœ¨ ê³„ì‚° (ìœ„í—˜ê°€ì¤‘ìì‚° ëŒ€ë¹„)
        const riskWeightedAssets = game.loanBalance * 1.0 + game.depositBalance * 0.2; // ëŒ€ì¶œì€ 100%, ê¸°íƒ€ìì‚°ì€ 20% ìœ„í—˜ê°€ì¤‘ì¹˜
        game.capitalRatio = (game.capital / riskWeightedAssets) * 100;
        
        // ë¶€ì‹¤ì±„ê¶Œë¹„ìœ¨ ê³„ì‚°
        game.badLoanRatio = Math.max(0.1, Math.min(20, game.badLoanRatio + (Math.random() - 0.5) * 0.5 + (ui.event.defaultChange || 0) * 0.3));

        // FSC ê°ë… ì²´í¬
        checkFSCRegulation();
        
        // ì´ì‚¬íšŒ ì••ë°• ì²´í¬
        checkBoardPressure();

        // ê²Œì„ ìƒíƒœ ì—…ë°ì´íŠ¸
        game.depositCustomers = newDeposit; 
        game.loanCustomers = newLoan; 
        game.profit += netIncome;
        game.capital = Math.max(game.capital + netIncome, 1000000000); // ìµœì†Œ ìë³¸ê¸ˆ 10ì–µ ìœ ì§€
        game.round++; 
        game.month = game.month === 12 ? 1 : game.month + 1;
        game.year = game.month === 1 ? game.year + 1 : game.year;
        game.time = 9; 
        game.isOpen = true;

        ui.dayResult = {
            loanIncome, assetIncome, totalIncome,
            depositCost, operatingCost, defaultLoss, totalCost,
            netIncome
        }; 
        ui.showDayEnd = false;
        
        // ê³ ê° ë°˜ì‘
        generateReactions();
        
        startTimers(); render();
    }

    function checkFSCRegulation() {
        ui.fscAlert = null;
        
        // BIS ìê¸°ìë³¸ë¹„ìœ¨ 8% ë¯¸ë§Œ - ê°•ë ¥í•œ ì œì¬
        if (game.capitalRatio < 8) {
            // ê·¹ë‹¨ì  ì¡°ì¹˜: ëŒ€ì¶œ ì‹ ê·œ ì¤‘ë‹¨
            game.fscSanctions.loanLimit = true;
            game.fscSanctions.operationSuspend = true;
            
            ui.fscAlert = {
                type: 'critical',
                title: 'ğŸš¨ ê¸ˆìœµê°ë…ì› ê¸´ê¸‰ ì œì¬ì¡°ì¹˜',
                message: `BIS ìê¸°ìë³¸ë¹„ìœ¨ ${game.capitalRatio.toFixed(1)}% ë¯¸ë‹¬ë¡œ ì‹ ê·œ ëŒ€ì¶œ ì „ë©´ ì¤‘ë‹¨ ë° ë¶€ë¶„ ì˜ì—…ì •ì§€ ëª…ë ¹`,
                penalty: 'ì‹ ê·œ ëŒ€ì¶œ ì¤‘ë‹¨, ì¼ë¶€ ì˜ì—… ì •ì§€',
                action: 'enforced'
            };
            game.fscWarnings.push('BISë¹„ìœ¨ë¯¸ë‹¬');
            
            // ê°•ì œ ì¡°ì¹˜: ëŒ€ì¶œ ê³ ê° ìˆ˜ 30% ê°ì†Œ
            game.loanCustomers = Math.floor(game.loanCustomers * 0.7);
            
        } else if (game.capitalRatio < 10) {
            game.fscSanctions.dividendBan = true;
            ui.fscAlert = {
                type: 'warning',
                title: 'âš ï¸ ê¸ˆìœµê°ë…ì› ê²½ì˜ê°œì„ ëª…ë ¹',
                message: `BIS ìê¸°ìë³¸ë¹„ìœ¨ ${game.capitalRatio.toFixed(1)}%ë¡œ ë°°ë‹¹ê¸ˆ ì§€ê¸‰ ê¸ˆì§€ ë° ê²½ì˜ê°œì„ ê³„íš ì œì¶œ ëª…ë ¹`,
                penalty: 'ë°°ë‹¹ê¸ˆì§€, ê²½ì˜ê°œì„ ê³„íš ì œì¶œ'
            };
        }
        
        // ë¶€ì‹¤ì±„ê¶Œë¹„ìœ¨ 5% ì´ìƒ - ëŒ€ì¶œ ê¸ˆë¦¬ ê°•ì œ ì¸ìƒ
        if (game.badLoanRatio > 5) {
            game.fscSanctions.rateControl = true;
            // ê°•ì œ ì¡°ì¹˜: ëŒ€ì¶œ ê¸ˆë¦¬ ìµœì†Œ 6% ì´ìƒ ìœ ì§€
            if (game.loanRate < 6.0) {
                game.loanRate = 6.0;
            }
            
            ui.fscAlert = {
                type: 'critical',
                title: 'ğŸš¨ ê¸ˆìœµê°ë…ì› ë¶€ì‹¤ì±„ê¶Œ íŠ¹ë³„ì¡°ì¹˜',
                message: `ë¶€ì‹¤ì±„ê¶Œë¹„ìœ¨ ${game.badLoanRatio.toFixed(1)}%ë¡œ ëŒ€ì¶œê¸ˆë¦¬ ìµœì†Œ 6% ê°•ì œ ì„¤ì • ë° íŠ¹ë³„ê²€ì‚¬ ì‹¤ì‹œ`,
                penalty: 'ëŒ€ì¶œê¸ˆë¦¬ ê°•ì œ ì¡°ì •, íŠ¹ë³„ê²€ì‚¬',
                action: 'rate_forced'
            };
            game.fscWarnings.push('ë¶€ì‹¤ì±„ê¶Œê³¼ë‹¤');
        }
        
        // ì˜ˆëŒ€ê¸ˆë¦¬ì°¨ 4%p ì´ìƒ - ì˜ˆê¸ˆ ê¸ˆë¦¬ ê°•ì œ ì¸ìƒ
        const margin = game.loanRate - game.depositRate;
        if (margin > 4.0) {
            // ê°•ì œ ì¡°ì¹˜: ì˜ˆê¸ˆ ê¸ˆë¦¬ë¥¼ ëŒ€ì¶œê¸ˆë¦¬ - 3.5%pë¡œ ê°•ì œ ì¡°ì •
            const forcedDepositRate = Math.max(game.loanRate - 3.5, 2.0);
            if (game.depositRate < forcedDepositRate) {
                game.depositRate = forcedDepositRate;
                game.fscSanctions.rateControl = true;
                
                ui.fscAlert = {
                    type: 'warning',
                    title: 'ğŸ“‹ ê¸ˆìœµê°ë…ì› ì„œë¯¼ê¸ˆìœµ ê°•ì œì¡°ì¹˜',
                    message: `ì˜ˆëŒ€ê¸ˆë¦¬ì°¨ ${margin.toFixed(1)}%p ê³¼ë„ë¡œ ì˜ˆê¸ˆê¸ˆë¦¬ ${forcedDepositRate.toFixed(1)}% ì´ìƒ ê°•ì œ ì„¤ì •`,
                    penalty: 'ì˜ˆê¸ˆê¸ˆë¦¬ ê°•ì œ ì¸ìƒ',
                    action: 'rate_forced'
                };
            }
        }

        // ì—°ì† ê²½ê³  3íšŒ ì´ìƒ - ì˜ì—…ì •ì§€
        if (game.fscWarnings.length >= 3) {
            game.fscSanctions.operationSuspend = true;
            game.fscWatchList = true;
            
            ui.fscAlert = {
                type: 'critical',
                title: 'ğŸ”´ ê¸ˆìœµê°ë…ì› ì˜ì—…ì •ì§€ ëª…ë ¹',
                message: `ì—°ì† ìœ„ë°˜ìœ¼ë¡œ ì¸í•œ ë¶€ë¶„ ì˜ì—…ì •ì§€. ì‹ ê·œ ê³ ê° ìœ ì¹˜ ê¸ˆì§€`,
                penalty: 'ì‹ ê·œ ê³ ê° ìœ ì¹˜ ì¤‘ë‹¨',
                action: 'operation_halt'
            };
            
            // ê°•ì œ ì¡°ì¹˜: ì‹ ê·œ ê³ ê° ìœ ì¹˜ ë¶ˆê°€
            game.depositCustomers = Math.max(game.depositCustomers - 10, 50);
            game.loanCustomers = Math.max(game.loanCustomers - 5, 20);
        }

        // ê°ì‹œëŒ€ìƒ ì§€ì •
        if (game.fscWarnings.length >= 2) {
            game.fscWatchList = true;
        }
    }

    function checkBoardPressure() {
        ui.boardAlert = null;
        
        // ìˆ˜ìµì„± ì••ë°•
        if (game.profit < 0) {
            game.boardPressure += 10;
            game.boardActions.ceoWarning++;
            
            if (game.boardActions.ceoWarning >= 3) {
                // ê°•ì œ ì¡°ì¹˜: ê´‘ê³ ë¹„ 50% ì‚­ê°
                game.advertising = Math.floor(game.advertising * 0.5);
                game.boardActions.budgetCut = true;
                
                ui.boardAlert = {
                    type: 'crisis',
                    title: 'ğŸ”¥ ì´ì‚¬íšŒ ê¸´ê¸‰ ì œì¬ì¡°ì¹˜',
                    message: `ì—°ì† ì†ì‹¤ë¡œ ì¸í•´ ê´‘ê³ ì˜ˆì‚° 50% ê°•ì œ ì‚­ê° ë° CEO ${game.boardActions.ceoWarning}ì°¨ ê²½ê³ `,
                    pressure: game.boardPressure,
                    action: 'budget_cut'
                };
            } else {
                ui.boardAlert = {
                    type: 'pressure',
                    title: 'ğŸ‘” ì´ì‚¬íšŒ ê¸´ê¸‰ ì†Œì§‘',
                    message: `ëˆ„ì  ì†ì‹¤ë¡œ CEO ${game.boardActions.ceoWarning}ì°¨ ê²½ê³ . ìˆ˜ìµì„± ê°œì„  ë°©ì•ˆì„ ì¦‰ì‹œ ì œì‹œí•˜ì‹­ì‹œì˜¤.`,
                    pressure: game.boardPressure
                };
            }
            
        } else if (ui.dayResult && ui.dayResult.netIncome < game.capital * 0.001) {
            game.boardPressure += 5;
            ui.boardAlert = {
                type: 'concern',
                title: 'ğŸ“Š ì´ì‚¬íšŒ ìš°ë ¤ í‘œëª…',
                message: `ROA(ìì‚°ìˆ˜ìµë¥ )ê°€ ë‚®ìŠµë‹ˆë‹¤. ë” ê³µê²©ì ì¸ ì˜ì—…ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.`,
                pressure: game.boardPressure
            };
        } else if (ui.dayResult && ui.dayResult.netIncome > game.capital * 0.005) {
            game.boardPressure = Math.max(0, game.boardPressure - 3);
            game.boardActions.ceoWarning = Math.max(0, game.boardActions.ceoWarning - 1);
        }
        
        // ì‹œì¥ì ìœ ìœ¨ ì••ë°•
        if (game.depositCustomers < 80 || game.loanCustomers < 40) {
            game.boardPressure += 3;
            
            if (game.boardPressure > 40 && !game.boardActions.strategyForced) {
                // ê°•ì œ ì¡°ì¹˜: ì˜ˆê¸ˆ ê¸ˆë¦¬ 0.5%p ê°•ì œ ì¸ìƒ
                game.depositRate = Math.min(game.depositRate + 0.5, 5.0);
                game.boardActions.strategyForced = true;
                
                ui.boardAlert = {
                    type: 'strategy',
                    title: 'ğŸ“ˆ ì´ì‚¬íšŒ ê°•ì œ ì „ëµ ë³€ê²½',
                    message: `ì‹œì¥ì ìœ ìœ¨ í•˜ë½ìœ¼ë¡œ ì˜ˆê¸ˆê¸ˆë¦¬ 0.5%p ê°•ì œ ì¸ìƒ. ê³µê²©ì  ë§ˆì¼€íŒ… ì „ëµ ì‹œí–‰`,
                    pressure: game.boardPressure,
                    action: 'strategy_forced'
                };
            } else {
                ui.boardAlert = {
                    type: 'strategy',
                    title: 'ğŸ“ˆ ì´ì‚¬íšŒ ì „ëµ ê²€í† ',
                    message: `ê³ ê° ìˆ˜ ê°ì†Œë¡œ ì‹œì¥ì ìœ ìœ¨ì´ í•˜ë½í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆì¼€íŒ… ì „ëµì„ ì¬ê²€í† í•˜ì‹­ì‹œì˜¤.`,
                    pressure: game.boardPressure
                };
            }
        }

        // ì´ì‚¬íšŒ ì••ë°•ì´ 70 ì´ìƒ - ì¸ìˆ˜í•©ë³‘ ë…¼ì˜
        if (game.boardPressure >= 70 && !game.boardActions.mergeTalk) {
            game.boardActions.mergeTalk = true;
            ui.boardAlert = {
                type: 'crisis',
                title: 'ğŸ’¼ ì´ì‚¬íšŒ ì¸ìˆ˜í•©ë³‘ ê²€í† ',
                message: `ê²½ì˜ ì•…í™”ë¡œ ëŒ€í˜•ì€í–‰ê³¼ì˜ ì¸ìˆ˜í•©ë³‘ì„ ê²€í† í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ì¦‰ì‹œ ì„±ê³¼ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤!`,
                pressure: game.boardPressure,
                action: 'merger_talk'
            };
        }

        // ì´ì‚¬íšŒ ì••ë°•ì´ 90 ì´ìƒ - ê²Œì„ì˜¤ë²„ ìœ„ê¸°
        if (game.boardPressure >= 90) {
            ui.boardAlert = {
                type: 'crisis',
                title: 'ğŸ”¥ CEO í•´ì„ ë° ì€í–‰ ë§¤ê°',
                message: `ì´ì‚¬íšŒì˜ ì‹ ë¢°ë¥¼ ì™„ì „íˆ ìƒì—ˆìŠµë‹ˆë‹¤. ì€í–‰ì´ ë‹¤ë¥¸ ê¸ˆìœµê¸°ê´€ì— ë§¤ê°ë  ì˜ˆì •ì…ë‹ˆë‹¤.`,
                pressure: game.boardPressure,
                action: 'game_over'
            };
            
            // ê²Œì„ì˜¤ë²„ ì²˜ë¦¬
            setTimeout(() => {
                if (confirm('ê²Œì„ì˜¤ë²„! ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    location.reload();
                }
            }, 2000);
        }
    }

    function generateReactions() {
        ui.reactions = [];
        
        // ì˜ˆê¸ˆ ê¸ˆë¦¬ ë°˜ì‘
        if (game.depositRate >= 3.3) {
            ui.reactions.push({icon: 'ğŸ˜Š', msg: '"' + game.depositRate + '% ì¢‹ë„¤ìš”!"'});
        } else if (game.depositRate < 2.3) {
            ui.reactions.push({icon: 'ğŸ˜', msg: '"' + game.depositRate + '%ëŠ” ë„ˆë¬´ ë‚®ì•„ìš”"'});
        }
        
        // ëŒ€ì¶œ ê¸ˆë¦¬ ë°˜ì‘
        if (game.loanRate <= 4.5) {
            ui.reactions.push({icon: 'ğŸ‰', msg: '"ëŒ€ì¶œ ' + game.loanRate + '%! ì €ë ´í•´ìš”!"'});
        } else if (game.loanRate > 6) {
            ui.reactions.push({icon: 'ğŸ˜ ', msg: '"ëŒ€ì¶œ ' + game.loanRate + '%ëŠ” ë„ˆë¬´ ë¹„ì‹¸ìš”!"'});
        }
        
        // ìì‚°ìš´ìš© ì„±ê³¼ì— ëŒ€í•œ ì‹œì¥ ë°˜ì‘
        if (game.assetYield > 4.5) {
            ui.reactions.push({icon: 'ğŸ“ˆ', msg: '"ìš´ìš©ìˆ˜ìµ ' + game.assetYield.toFixed(1) + '%! ë›°ì–´ë‚œ ìì‚°ê´€ë¦¬ë„¤ìš”"'});
        } else if (game.assetYield < 2.5) {
            ui.reactions.push({icon: 'ğŸ“‰', msg: '"ìš´ìš©ìˆ˜ìµ ' + game.assetYield.toFixed(1) + '%ëŠ” ì•„ì‰½ë„¤ìš”. í¬íŠ¸í´ë¦¬ì˜¤ ì¬ê²€í†  í•„ìš”"'});
        }
        
        // FSC ê°ì‹œëŒ€ìƒì¼ ë•Œ ì–¸ë¡  ë°˜ì‘
        if (game.fscWatchList) {
            ui.reactions.push({icon: 'ğŸ“°', msg: '"ê¸ˆê°ì› ê°ì‹œëŒ€ìƒ ì€í–‰... ëŒ€ì¶œ ë°›ê¸° êº¼ë ¤ì ¸ìš”"'});
        }
        
        // ì´ì‚¬íšŒ ì••ë°•ì´ ë†’ì„ ë•Œ ì§ì› ë°˜ì‘
        if (game.boardPressure > 50) {
            ui.reactions.push({icon: 'ğŸ˜°', msg: '"ì‚¬ë‚´ ë¶„ìœ„ê¸°ê°€ ì¢‹ì§€ ì•Šë„¤ìš”... êµ¬ì¡°ì¡°ì • ì†Œë¬¸ì´..."'});
        }
        
        // ìë³¸ë¹„ìœ¨ ë¶€ì¡±ì‹œ ì‹ ìš©ë“±ê¸‰ ê¸°ê´€ ë°˜ì‘
        if (game.capitalRatio < 8) {
            ui.reactions.push({icon: 'ğŸ“Š', msg: '"ì‹ ìš©ë“±ê¸‰ í•˜í–¥ ì¡°ì • ê²€í† ... ìë³¸ í™•ì¶©ì´ ì‹œê¸‰í•©ë‹ˆë‹¤"'});
        }
    }

    function openInput(type, value, label) { ui.inputType = type; ui.inputValue = value.toString(); ui.inputLabel = label; ui.showInput = true; render(); }
    function closeInput() { ui.showInput = false; render(); }
    function applyInput() {
        const val = parseFloat(ui.inputValue);
        if (isNaN(val)) return;
        switch (ui.inputType) {
            case 'depositRate': game.depositRate = Math.max(1, Math.min(5, val)); break;
            case 'loanRate': game.loanRate = Math.max(3, Math.min(10, val)); break;
            case 'advertising': game.advertising = Math.max(0, Math.min(5000000, Math.round(val))); break;
        }
        closeInput();
    }

    function updateSlider(id, type) {
        const slider = document.getElementById(id), display = document.getElementById(id + '-value');
        if (!slider || !display) return;
        const val = parseFloat(slider.value);
        switch (type) {
            case 'depositRate': game.depositRate = val; break;
            case 'loanRate': game.loanRate = val; break;
            case 'advertising': game.advertising = parseInt(val); break;
        }
        display.textContent = type === 'advertising' ? fmt(val) : val + '%';
    }

    function render() {
        const app = document.getElementById('app');
        
        if (!game.started) {
            app.innerHTML = `<div class="screen" style="background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 50%, #1e40af 100%); align-items: center; justify-content: center;">
                <div style="max-width: 400px; width: 100%; padding: 2rem;">
                    <div class="text-center mb-4">
                        <h1 class="text-xl font-bold" style="color: white; margin-bottom: 1rem;">ğŸ¦ ì€í–‰ç‹</h1>
                        <p style="color: #bfdbfe;">í˜„ì‹¤ì ì¸ ì€í–‰ ê²½ì˜ ì‹œë®¬ë ˆì´ì…˜</p>
                    </div>
                    <div style="background: #111827; border: 2px solid #60a5fa; border-radius: 0.75rem; padding: 1.5rem;">
                        <div class="mb-3">
                            <label style="color: #93c5fd; font-weight: bold; margin-bottom: 0.5rem; display: block;">ğŸ›ï¸ ì€í–‰ ì´ë¦„:</label>
                            <input type="text" placeholder="ì˜ˆ: ì‹ í•œ, êµ­ë¯¼, í•˜ë‚˜, ìš°ë¦¬..." value="${game.bankName}" class="input" style="background: #374151; color: white;" onchange="game.bankName = this.value; render();"/>
                        </div>
                        <button onclick="startGame()" ${game.bankName.trim() ? '' : 'disabled'} class="btn w-full" style="padding: 1rem;">
                            ${game.bankName.trim() ? 'ğŸš€ ' + game.bankName + ' ì€í–‰ ì‹œì‘!' : 'ì€í–‰ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”'}
                        </button>
                    </div>
                </div>
            </div>`;
            return;
        }

        app.innerHTML = `<div class="screen">
            <div class="header">
                <div class="flex justify-between items-center">
                    <span class="font-bold">ğŸ¦ ${game.bankName}</span>
                    <span style="color: #93c5fd;">ğŸ“… ${game.year}ë…„ ${game.month}ì›” ${game.round}ì¼</span>
                </div>
                <div class="flex justify-between items-center">
                    <div id="time">ğŸ• ${fmtTime(game.time)}</div>
                    <div style="color: #86efac; font-weight: bold;">ğŸ’° ${fmt(game.capital)}</div>
                    ${game.isOpen ? '<button onclick="advanceTime()" class="btn">â° +1H</button>' : '<button onclick="ui.showDayEnd = true; render();" class="btn">ğŸŒ™ ë§ˆê°</button>'}
                </div>
            </div>
            <div class="bank-area">
                <div class="clock"><div id="hour-hand" class="hand hour-hand"></div><div id="minute-hand" class="hand minute-hand"></div></div>
                <div class="sign"><div class="font-bold text-center">${game.bankName} ì€í–‰</div></div>
                <div class="rate-board"><div class="font-bold mb-1">ğŸ’° ê¸ˆë¦¬</div><div>ì˜ˆê¸ˆ: ${game.depositRate}%</div><div>ëŒ€ì¶œ: ${game.loanRate}%</div></div>
                <div class="teller">
                    <div class="teller-booth"><div id="teller-0" class="teller-person">ğŸ‘¨â€ğŸ’¼</div></div>
                    <div class="teller-booth"><div id="teller-1" class="teller-person">ğŸ‘¨â€ğŸ’¼</div></div>
                    <div class="teller-booth"><div id="teller-2" class="teller-person">ğŸ‘¨â€ğŸ’¼</div></div>
                </div>
                <div id="customers" class="customers"></div>
            </div>
            <div class="content">
                <h3 class="text-lg font-bold mb-3">ğŸ“Š ì€í–‰ ê²½ì˜ í˜„í™©</h3>
                <div class="grid mb-4">
                    <div class="card blue"><div class="font-bold mb-2">ğŸ’° ìˆ˜ì‹ </div><div class="text-sm">ê³ ê°: ${game.depositCustomers}ëª…<br>ì˜ˆê¸ˆ: ${fmt(game.depositBalance)}<br>ìš´ìš©ìˆ˜ìµ: ${game.assetYield.toFixed(1)}%</div></div>
                    <div class="card green"><div class="font-bold mb-2">ğŸ’¸ ì—¬ì‹ </div><div class="text-sm">ê³ ê°: ${game.loanCustomers}ëª…<br>ëŒ€ì¶œ: ${fmt(game.loanBalance)}<br>ì—°ì²´ìœ¨: ${game.defaultRate.toFixed(1)}%</div></div>
                    <div class="card yellow"><div class="font-bold mb-2">ğŸ¦ í˜„í™©</div><div class="text-sm">ìë³¸: ${fmt(game.capital)}<br>ìˆ˜ìµ: ${fmt(game.profit)}<br>ì˜ˆëŒ€ë§ˆì§„: ${(game.loanRate - game.depositRate).toFixed(1)}%p</div></div>
                </div>
                
                <!-- ê¸ˆìœµê°ë… í˜„í™© -->
                <div class="grid mb-4">
                    <div class="card" style="background: ${game.capitalRatio < 8 ? '#fee2e2' : game.capitalRatio < 10 ? '#fef3c7' : '#dcfce7'};">
                        <div class="font-bold mb-1">ğŸ“Š BISë¹„ìœ¨</div>
                        <div class="text-sm">${game.capitalRatio.toFixed(1)}%</div>
                        <div style="font-size: 0.7rem; color: #666;">${game.capitalRatio < 8 ? 'âš ï¸ìœ„í—˜' : game.capitalRatio < 10 ? 'ì£¼ì˜' : 'ì–‘í˜¸'}</div>
                    </div>
                    <div class="card" style="background: ${game.badLoanRatio > 5 ? '#fee2e2' : game.badLoanRatio > 3 ? '#fef3c7' : '#dcfce7'};">
                        <div class="font-bold mb-1">ğŸ“ˆ ë¶€ì‹¤ì±„ê¶Œ</div>
                        <div class="text-sm">${game.badLoanRatio.toFixed(1)}%</div>
                        <div style="font-size: 0.7rem; color: #666;">${game.badLoanRatio > 5 ? 'âš ï¸ê³¼ë‹¤' : game.badLoanRatio > 3 ? 'ì£¼ì˜' : 'ì–‘í˜¸'}</div>
                    </div>
                    <div class="card" style="background: ${game.boardPressure > 60 ? '#fee2e2' : game.boardPressure > 30 ? '#fef3c7' : '#dcfce7'};">
                        <div class="font-bold mb-1">ğŸ‘” ì´ì‚¬íšŒ</div>
                        <div class="text-sm">ì••ë°•ë„ ${game.boardPressure}</div>
                        <div style="font-size: 0.7rem; color: #666;">${game.boardPressure > 60 ? 'âš ï¸ìœ„í—˜' : game.boardPressure > 30 ? 'ì£¼ì˜' : 'ì•ˆì •'}</div>
                    </div>
                </div>
                
                ${game.fscWatchList ? '<div class="card" style="background: #fee2e2; border-left: 4px solid #dc2626; margin-bottom: 1rem;"><div class="font-bold">ğŸš¨ ê¸ˆê°ì› ê°ì‹œëŒ€ìƒ ì§€ì •</div><div class="text-sm">íŠ¹ë³„ ê´€ë¦¬ ê°ë… í•˜ì— ìˆìŠµë‹ˆë‹¤</div></div>' : ''}
                
                <!-- FSC ì œì¬ì¡°ì¹˜ í‘œì‹œ -->
                ${Object.values(game.fscSanctions).some(s => s) ? `
                    <div class="card" style="background: #fee2e2; border-left: 4px solid #dc2626; margin-bottom: 1rem;">
                        <div class="font-bold">âš–ï¸ ê¸ˆê°ì› ì œì¬ì¡°ì¹˜ ì‹œí–‰ì¤‘</div>
                        <div class="text-sm">
                            ${game.fscSanctions.rateControl ? 'â€¢ ê¸ˆë¦¬ í†µì œ (ê°•ì œ ê¸ˆë¦¬ ì¡°ì •)<br>' : ''}
                            ${game.fscSanctions.loanLimit ? 'â€¢ ì‹ ê·œ ëŒ€ì¶œ ì œí•œ<br>' : ''}
                            ${game.fscSanctions.dividendBan ? 'â€¢ ë°°ë‹¹ê¸ˆ ì§€ê¸‰ ê¸ˆì§€<br>' : ''}
                            ${game.fscSanctions.operationSuspend ? 'â€¢ ë¶€ë¶„ ì˜ì—…ì •ì§€<br>' : ''}
                        </div>
                    </div>
                ` : ''}
                
                <!-- ì´ì‚¬íšŒ ì œì¬ì¡°ì¹˜ í‘œì‹œ -->
                ${Object.values(game.boardActions).some(s => s) || game.boardActions.ceoWarning > 0 ? `
                    <div class="card" style="background: #fef3c7; border-left: 4px solid #f59e0b; margin-bottom: 1rem;">
                        <div class="font-bold">ğŸ‘” ì´ì‚¬íšŒ ì¡°ì¹˜ì‚¬í•­</div>
                        <div class="text-sm">
                            ${game.boardActions.ceoWarning > 0 ? `â€¢ CEO ê²½ê³  ${game.boardActions.ceoWarning}íšŒ<br>` : ''}
                            ${game.boardActions.strategyForced ? 'â€¢ ê°•ì œ ì „ëµ ë³€ê²½ ì‹œí–‰<br>' : ''}
                            ${game.boardActions.budgetCut ? 'â€¢ ì˜ˆì‚° ì‚­ê° ì¡°ì¹˜<br>' : ''}
                            ${game.boardActions.mergeTalk ? 'â€¢ ì¸ìˆ˜í•©ë³‘ ê²€í† ì¤‘<br>' : ''}
                        </div>
                    </div>
                ` : ''}
                
                ${ui.fscAlert ? `<div class="card mb-3" style="background: ${ui.fscAlert.type === 'critical' ? '#fee2e2' : '#fef3c7'}; border-left: 4px solid ${ui.fscAlert.type === 'critical' ? '#dc2626' : '#f59e0b'};">
                    <div class="font-bold">${ui.fscAlert.title}</div>
                    <div class="text-sm">${ui.fscAlert.message}</div>
                    <div style="font-size: 0.7rem; color: #666; margin-top: 0.5rem;">ì¡°ì¹˜: ${ui.fscAlert.penalty}</div>
                    ${ui.fscAlert.action ? `<div style="font-size: 0.7rem; color: #dc2626; margin-top: 0.3rem; font-weight: bold;">
                        ${ui.fscAlert.action === 'rate_forced' ? 'âœ“ ê¸ˆë¦¬ê°€ ê°•ì œë¡œ ì¡°ì •ë˜ì—ˆìŠµë‹ˆë‹¤' : ''}
                        ${ui.fscAlert.action === 'operation_halt' ? 'âœ“ ì‹ ê·œ ê³ ê° ìœ ì¹˜ê°€ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤' : ''}
                        ${ui.fscAlert.action === 'enforced' ? 'âœ“ ê°•ì œ ì œì¬ì¡°ì¹˜ê°€ ì‹œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤' : ''}
                    </div>` : ''}
                </div>` : ''}
                
                ${ui.boardAlert ? `<div class="card mb-3" style="background: ${ui.boardAlert.type === 'crisis' ? '#fee2e2' : '#fef3c7'}; border-left: 4px solid ${ui.boardAlert.type === 'crisis' ? '#dc2626' : '#f59e0b'};">
                    <div class="font-bold">${ui.boardAlert.title}</div>
                    <div class="text-sm">${ui.boardAlert.message}</div>
                    <div style="font-size: 0.7rem; color: #666; margin-top: 0.5rem;">ì••ë°•ë„: ${ui.boardAlert.pressure}/100</div>
                    ${ui.boardAlert.action ? `<div style="font-size: 0.7rem; color: #dc2626; margin-top: 0.3rem; font-weight: bold;">
                        ${ui.boardAlert.action === 'budget_cut' ? 'âœ“ ê´‘ê³ ì˜ˆì‚°ì´ 50% ì‚­ê°ë˜ì—ˆìŠµë‹ˆë‹¤' : ''}
                        ${ui.boardAlert.action === 'strategy_forced' ? 'âœ“ ì˜ˆê¸ˆê¸ˆë¦¬ê°€ ê°•ì œë¡œ 0.5%p ì¸ìƒë˜ì—ˆìŠµë‹ˆë‹¤' : ''}
                        ${ui.boardAlert.action === 'merger_talk' ? 'âœ“ ì¸ìˆ˜í•©ë³‘ ë…¼ì˜ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤' : ''}
                        ${ui.boardAlert.action === 'game_over' ? 'âœ“ ê²Œì„ì˜¤ë²„ - ì€í–‰ì´ ë§¤ê°ë©ë‹ˆë‹¤' : ''}
                    </div>` : ''}
                </div>` : ''}
                ${ui.reactions.map(r => `<div class="card green mb-3">${r.icon} ${r.msg}</div>`).join('')}
                ${ui.event ? `<div class="card yellow">${ui.event.name}: ${ui.event.effect}</div>` : ''}
            </div>
        </div>`;

        if (ui.showDayEnd) {
            app.insertAdjacentHTML('beforeend', `<div class="modal">
                <div class="modal-content popup">
                    <h3 class="text-xl font-bold mb-3 text-center">ğŸŒ™ ì˜ì—… ë§ˆê°</h3>
                    ${ui.dayResult ? `<div class="mb-3" style="background: #1e40af; padding: 1rem; border-radius: 0.5rem;">
                        <h4 style="color: #bfdbfe; font-weight: bold; margin-bottom: 0.5rem;">ğŸ“Š ì¼ì¼ ì†ìµê³„ì‚°ì„œ</h4>
                        <div style="color: #86efac; margin-bottom: 0.3rem;">
                            ğŸ“ˆ ìˆ˜ìµ ì´ê³„: ${fmt(ui.dayResult.totalIncome)}
                        </div>
                        <div style="color: #93c5fd; font-size: 0.8rem; margin-left: 0.5rem;">
                            â€¢ ëŒ€ì¶œì´ì ìˆ˜ìµ: ${fmt(ui.dayResult.loanIncome)}<br>
                            â€¢ ìì‚°ìš´ìš© ìˆ˜ìµ: ${fmt(ui.dayResult.assetIncome)} (${game.assetYield.toFixed(1)}%)
                        </div>
                        <div style="color: #fca5a5; margin: 0.3rem 0;">
                            ğŸ“‰ ë¹„ìš© ì´ê³„: ${fmt(ui.dayResult.totalCost)}
                        </div>
                        <div style="color: #93c5fd; font-size: 0.8rem; margin-left: 0.5rem;">
                            â€¢ ì˜ˆê¸ˆì´ì ë¹„ìš©: ${fmt(ui.dayResult.depositCost)}<br>
                            â€¢ ìš´ì˜ë¹„ìš©: ${fmt(ui.dayResult.operatingCost)}<br>
                            â€¢ ì—°ì²´ì†ì‹¤: ${fmt(ui.dayResult.defaultLoss)}
                        </div>
                        <div class="font-bold" style="color: ${ui.dayResult.netIncome >= 0 ? '#86efac' : '#fca5a5'}; margin-top: 0.5rem;">
                            ğŸ’° ìˆœì´ìµ: ${fmt(ui.dayResult.netIncome)}
                        </div>
                        <div style="color: #93c5fd; font-size: 0.8rem; margin-top: 0.5rem;">
                            BISë¹„ìœ¨: ${game.capitalRatio.toFixed(1)}% | ë¶€ì‹¤ì±„ê¶Œ: ${game.badLoanRatio.toFixed(1)}% | ì´ì‚¬íšŒì••ë°•: ${game.boardPressure}
                        </div>
                    </div>` : ''}
                    <div class="mb-3" style="background: #f3f4f6; padding: 1rem; border-radius: 0.5rem;">
                        <div class="flex justify-between items-center mb-2">
                            <label class="font-bold">ğŸ’° ìˆ˜ì‹  ì´ììœ¨</label>
                            <span id="deposit-slider-value" class="font-bold" style="color: #2563eb;">${game.depositRate}%</span>
                        </div>
                        <input type="range" id="deposit-slider" min="1" max="5" step="0.1" value="${game.depositRate}" class="slider" onchange="updateSlider('deposit-slider', 'depositRate')"/>
                    </div>
                    <div class="mb-3" style="background: #f3f4f6; padding: 1rem; border-radius: 0.5rem;">
                        <div class="flex justify-between items-center mb-2">
                            <label class="font-bold">ğŸ’¸ ì—¬ì‹  ì´ììœ¨</label>
                            <span id="loan-slider-value" class="font-bold" style="color: #16a34a;">${game.loanRate}%</span>
                        </div>
                        <input type="range" id="loan-slider" min="3" max="10" step="0.1" value="${game.loanRate}" class="slider" onchange="updateSlider('loan-slider', 'loanRate')"/>
                    </div>
                    <button onclick="processDay()" class="btn w-full">ğŸŒ… ë‹¤ìŒ ë‚  ì˜ì—… ì‹œì‘</button>
                </div>
            </div>`);
        }

        if (ui.showInput) {
            app.insertAdjacentHTML('beforeend', `<div class="modal">
                <div class="modal-content">
                    <h3 class="text-lg font-bold mb-3">${ui.inputLabel} ì§ì ‘ ì…ë ¥</h3>
                    <input type="number" id="modal-input" value="${ui.inputValue}" class="input mb-3" onchange="ui.inputValue = this.value"/>
                    <div class="flex gap-2">
                        <button onclick="closeInput()" class="btn btn-secondary w-full">ì·¨ì†Œ</button>
                        <button onclick="applyInput()" class="btn w-full">ì ìš©</button>
                    </div>
                </div>
            </div>`);
        }

        updateTime(); updateCustomers();
    }

    document.addEventListener('DOMContentLoaded', render);
</script>
```

</body>
</html>