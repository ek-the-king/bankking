<!DOCTYPE html>

<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=360, height=550, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>🏦 은행王 - 은행 경영 시뮬레이션</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        width: 360px;
        height: 550px;
        overflow: hidden;
        font-size: 12px;
        position: fixed;
        top: 0;
        left: 0;
        background: #f0f9ff;
    }

    /* 기본 유틸리티 */
    .hidden { display: none; }
    .fixed { position: fixed; }
    .absolute { position: absolute; }
    .relative { position: relative; }
    .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
    
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .items-center { align-items: center; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }
    .gap-1 { gap: 0.25rem; }
    .gap-2 { gap: 0.5rem; }

    .w-full { width: 100%; }
    .h-full { height: 100%; }
    
    .p-1 { padding: 0.25rem; }
    .p-2 { padding: 0.5rem; }
    .p-3 { padding: 0.75rem; }
    .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }

    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mt-1 { margin-top: 0.25rem; }
    .mt-2 { margin-top: 0.5rem; }

    .text-xs { font-size: 0.7rem; line-height: 1.2; }
    .text-sm { font-size: 0.8rem; line-height: 1.3; }
    .text-base { font-size: 0.9rem; line-height: 1.4; }
    .text-lg { font-size: 1rem; line-height: 1.4; }

    .font-bold { font-weight: 700; }
    .font-mono { font-family: ui-monospace, SFMono-Regular, monospace; }
    .text-center { text-align: center; }

    /* 색상 */
    .text-white { color: white; }
    .text-gray-600 { color: #4b5563; }
    .text-gray-700 { color: #374151; }
    .text-gray-800 { color: #1f2937; }
    .text-blue-200 { color: #bfdbfe; }
    .text-blue-300 { color: #93c5fd; }
    .text-blue-600 { color: #2563eb; }
    .text-blue-800 { color: #1e40af; }
    .text-green-300 { color: #86efac; }
    .text-green-600 { color: #16a34a; }
    .text-red-300 { color: #fca5a5; }
    .text-red-600 { color: #dc2626; }
    .text-yellow-300 { color: #fde047; }
    .text-yellow-600 { color: #ca8a04; }
    .text-yellow-800 { color: #854d0e; }

    .bg-white { background-color: white; }
    .bg-gray-100 { background-color: #f3f4f6; }
    .bg-gray-700 { background-color: #374151; }
    .bg-gray-800 { background-color: #1f2937; }
    .bg-gray-900 { background-color: #111827; }
    .bg-blue-50 { background-color: #eff6ff; }
    .bg-blue-100 { background-color: #dbeafe; }
    .bg-blue-600 { background-color: #2563eb; }
    .bg-blue-800 { background-color: #1e40af; }
    .bg-blue-900 { background-color: #1e3a8a; }
    .bg-green-50 { background-color: #f0fdf4; }
    .bg-green-100 { background-color: #dcfce7; }
    .bg-red-50 { background-color: #fef2f2; }
    .bg-yellow-50 { background-color: #fefce8; }
    .bg-yellow-100 { background-color: #fef3c7; }

    /* 그라디언트 */
    .bg-gradient-start {
        background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 50%, #1e40af 100%);
    }
    .bg-gradient-bank {
        background: linear-gradient(180deg, #dbeafe 0%, #bfdbfe 100%);
    }

    /* 버튼 */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border: none;
        border-radius: 0.375rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.75rem;
        padding: 0.375rem 0.75rem;
    }
    .btn:active { transform: translateY(1px); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-primary { background-color: #2563eb; color: white; }
    .btn-secondary { background-color: #6b7280; color: white; }

    /* 입력 */
    .input {
        width: 100%;
        padding: 0.375rem;
        border: 1px solid #d1d5db;
        border-radius: 0.375rem;
        font-size: 0.75rem;
    }
    .input:focus {
        outline: none;
        border-color: #2563eb;
    }

    /* 슬라이더 */
    .slider {
        -webkit-appearance: none;
        width: 100%;
        height: 0.75rem;
        border-radius: 0.375rem;
        background: #d1d5db;
        outline: none;
        cursor: pointer;
    }
    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 1rem;
        width: 1rem;
        border-radius: 50%;
        background: #2563eb;
        cursor: pointer;
        border: 1px solid #1e40af;
    }

    /* 카드 */
    .card {
        background: white;
        border-radius: 0.375rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        padding: 0.5rem;
    }

    /* 경고 */
    .alert {
        padding: 0.375rem;
        border-radius: 0.375rem;
        border-left: 3px solid;
    }
    .alert-warning {
        background-color: #fef3c7;
        border-color: #f59e0b;
        color: #92400e;
    }
    .alert-danger {
        background-color: #fee2e2;
        border-color: #ef4444;
        color: #991b1b;
    }

    /* 애니메이션 */
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    @keyframes bounce {
        0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
        40%, 43% { transform: translate3d(0, -8px, 0); }
        70% { transform: translate3d(0, -4px, 0); }
    }
    .animate-pulse { animation: pulse 2s infinite; }
    .animate-bounce { animation: bounce 1s infinite; }

    /* 그리드 */
    .grid { display: grid; }
    .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }

    /* 테두리 */
    .border { border: 1px solid #d1d5db; }
    .border-2 { border: 2px solid; }
    .border-blue-400 { border-color: #60a5fa; }
    .border-blue-600 { border-color: #2563eb; }
    .border-yellow-600 { border-color: #ca8a04; }
    .border-green-400 { border-color: #4ade80; }
    .border-red-400 { border-color: #f87171; }
    .rounded { border-radius: 0.25rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-full { border-radius: 50%; }

    /* 위치 */
    .top-0 { top: 0; }
    .top-1 { top: 0.25rem; }
    .bottom-0 { bottom: 0; }
    .bottom-1 { bottom: 0.25rem; }
    .bottom-2 { bottom: 0.5rem; }
    .left-0 { left: 0; }
    .left-1 { left: 0.25rem; }
    .left-1\/2 { left: 50%; }
    .right-1 { right: 0.25rem; }
    .transform { transform: translateZ(0); }
    .-translate-x-1\/2 { transform: translateX(-50%); }
    .-translate-y-1\/2 { transform: translateY(-50%); }

    /* 크기 */
    .w-4 { width: 1rem; }
    .w-6 { width: 1.5rem; }
    .h-3 { height: 0.75rem; }
    .h-4 { height: 1rem; }
    .h-6 { height: 1.5rem; }
    .h-20 { height: 5rem; }
    .h-24 { height: 6rem; }

    /* Z-인덱스 */
    .z-10 { z-index: 10; }
    .z-20 { z-index: 20; }
    .z-30 { z-index: 30; }
    .z-40 { z-index: 40; }
    .z-50 { z-index: 50; }

    /* 오버플로우 */
    .overflow-hidden { overflow: hidden; }
    .overflow-y-auto { overflow-y: auto; }
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* 플렉스 */
    .flex-1 { flex: 1; }
    .flex-shrink-0 { flex-shrink: 0; }

    /* 공간 */
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }

    /* 투명도 */
    .bg-opacity-75 { background-color: rgba(0, 0, 0, 0.75); }
</style>
```

</head>
<body>
    <div id="app"></div>

```
<script>
    // 게임 상태
    let gameState = {
        bankName: "",
        initialCapital: 50000000000,
        currentCapital: 50000000000,
        totalProfit: 0,
        depositRate: 2.5,
        depositCustomers: 100,
        avgDepositAmount: 50000000,
        totalDepositBalance: 5000000000,
        assetYield: 3.5,
        loanRate: 5.0,
        loanCustomers: 50,
        avgLoanAmount: 100000000,
        totalLoanBalance: 5000000000,
        defaultRate: 0.05,
        advertising: 1000000,
        round: 1,
        year: 1,
        month: 1,
        currentTime: 9,
        isBusinessHours: true,
        dayEnded: false,
        gameStarted: false
    };

    // UI 상태
    let uiState = {
        currentEvent: null,
        marketReactions: [],
        showDayEndPopup: false,
        customers: [],
        tellerBusy: [false, false, false],
        dayResults: null,
        showInputModal: false,
        inputType: '',
        inputValue: '',
        inputLabel: ''
    };

    // 타이머들
    let gameTimer = null;
    let customerTimer = null;

    // 통화 포맷팅
    function formatCurrency(amount) {
        if (amount >= 1000000000000) {
            return `${(amount / 1000000000000).toFixed(1)}조원`;
        } else if (amount >= 100000000) {
            return `${(amount / 100000000).toFixed(0)}억원`;
        } else if (amount >= 10000) {
            return `${(amount / 10000).toFixed(0)}만원`;
        }
        return `${Math.round(amount / 1000)}천원`;
    }

    // 시간 포맷팅
    function formatTime(time) {
        const hour = Math.floor(time);
        const minute = Math.round((time % 1) * 60);
        return `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
    }

    // 시장 이벤트
    const marketEvents = [
        { name: "경기 호황", effect: "고객 수 +25%, 운용수익 +0.5%p", multiplier: 1.25, yieldBonus: 0.5, defaultChange: -0.3 },
        { name: "경기 침체", effect: "고객 수 -20%, 운용수익 -0.3%p", multiplier: 0.8, yieldBonus: -0.3, defaultChange: 0.6 },
        { name: "금리 인상", effect: "예금 고객 +20%, 대출 고객 -15%", depositMultiplier: 1.2, loanMultiplier: 0.85, defaultChange: 0.2 },
        { name: "부동산 호황", effect: "대출 수요 급증 +40%", loanMultiplier: 1.4, defaultChange: -0.1 },
        { name: "안정적 시장", effect: "변화 없음", multiplier: 1.0, defaultChange: 0 }
    ];

    // 시장 반응 생성
    function generateMarketReactions(depositRate, loanRate, bankName) {
        const reactions = [];

        if (depositRate >= 3.3) {
            reactions.push({
                type: 'positive',
                icon: '😊',
                message: `"${bankName} 예금 ${depositRate}%! 좋네요!"`
            });
        } else if (depositRate < 2.3) {
            reactions.push({
                type: 'negative',
                icon: '😞',
                message: `"예금 ${depositRate}%는 너무 낮아요"`
            });
        }

        if (loanRate <= 4.7) {
            reactions.push({
                type: 'positive',
                icon: '🎉',
                message: `"대출 ${loanRate}%! 저렴하네요!"`
            });
        } else if (loanRate > 5.7) {
            reactions.push({
                type: 'negative',
                icon: '😤',
                message: `"대출 ${loanRate}%는 비싸요"`
            });
        }

        return reactions.slice(0, 2);
    }

    // 하루 결과 계산
    function calculateDayResults() {
        const event = marketEvents[Math.floor(Math.random() * marketEvents.length)];
        uiState.currentEvent = event;

        const adEffect = Math.min(gameState.advertising / 1000000, 3);

        const baseDepositCustomers = Math.max(10, 
            100 - (gameState.depositRate - 2.8) * (-30) + adEffect * 15
        );
        const newDepositCustomers = Math.floor(baseDepositCustomers * (event.depositMultiplier || event.multiplier || 1));
        const newTotalDepositBalance = newDepositCustomers * gameState.avgDepositAmount;

        const baseLoanCustomers = Math.max(5,
            80 - (gameState.loanRate - 5.2) * 20 + adEffect * 10
        );
        const newLoanCustomers = Math.floor(baseLoanCustomers * (event.loanMultiplier || event.multiplier || 1));
        const newLoanExecuted = newLoanCustomers * gameState.avgLoanAmount;

        const actualLoanExecuted = gameState.currentCapital >= newLoanExecuted ? 
            newLoanExecuted : gameState.currentCapital;
        const actualNewLoanCustomers = actualLoanExecuted / gameState.avgLoanAmount;
        const newTotalLoanBalance = gameState.totalLoanBalance + actualLoanExecuted;

        const adjustedDefaultRate = Math.max(0.01, Math.min(0.25, 
            (gameState.defaultRate + Math.random() * 0.1 - 0.05) * (1 + (event.defaultChange || 0))
        ));

        const depositInterestCost = newTotalDepositBalance * (gameState.depositRate / 100);
        const assetOperationIncome = newTotalDepositBalance * ((gameState.assetYield + (event.yieldBonus || 0)) / 100);
        const loanInterestIncome = newTotalLoanBalance * (gameState.loanRate / 100);
        const defaultLoss = newTotalLoanBalance * adjustedDefaultRate;
        const operatingCost = (gameState.initialCapital * 0.015) + gameState.advertising;

        const netIncome = assetOperationIncome + loanInterestIncome - depositInterestCost - defaultLoss - operatingCost;

        return {
            event,
            depositCustomers: newDepositCustomers,
            totalDepositBalance: newTotalDepositBalance,
            depositInterestCost,
            assetOperationIncome,
            loanCustomers: actualNewLoanCustomers,
            newLoanExecuted: actualLoanExecuted,
            totalLoanBalance: newTotalLoanBalance,
            loanInterestIncome,
            defaultLoss,
            newCurrentCapital: Math.max(0, gameState.currentCapital - actualLoanExecuted),
            operatingCost,
            netIncome,
            capitalShortage: newLoanExecuted > gameState.currentCapital
        };
    }

    // 하루 처리
    function processDay() {
        const results = calculateDayResults();
        uiState.dayResults = results;

        const nextMonth = gameState.month === 12 ? 1 : gameState.month + 1;
        const nextYear = gameState.month === 12 ? gameState.year + 1 : gameState.year;

        gameState.depositCustomers = results.depositCustomers;
        gameState.loanCustomers = results.loanCustomers;
        gameState.totalDepositBalance = results.totalDepositBalance;
        gameState.totalLoanBalance = results.totalLoanBalance;
        gameState.currentCapital = results.newCurrentCapital;
        gameState.totalProfit += results.netIncome;
        gameState.defaultRate = results.defaultRate || gameState.defaultRate;
        gameState.round += 1;
        gameState.month = nextMonth;
        gameState.year = nextYear;
        gameState.currentTime = 9;
        gameState.isBusinessHours = true;
        gameState.dayEnded = false;

        uiState.marketReactions = generateMarketReactions(gameState.depositRate, gameState.loanRate, gameState.bankName);
        uiState.showDayEndPopup = false;

        startTimers();
        render();
    }

    // 게임 시작
    function startGame() {
        gameState.gameStarted = true;
        gameState.totalDepositBalance = gameState.depositCustomers * gameState.avgDepositAmount;
        gameState.totalLoanBalance = gameState.loanCustomers * gameState.avgLoanAmount;
        
        startTimers();
        render();
    }

    // 타이머 시작
    function startTimers() {
        clearTimers();

        if (gameState.gameStarted && gameState.isBusinessHours) {
            // 게임 시간 타이머
            gameTimer = setInterval(() => {
                gameState.currentTime += 0.3;
                
                if (gameState.currentTime >= 18) {
                    gameState.currentTime = 18;
                    gameState.isBusinessHours = false;
                    gameState.dayEnded = true;
                    uiState.showDayEndPopup = true;
                    clearTimers();
                    render();
                }
                
                updateTimeDisplay();
            }, 1000);

            // 고객 애니메이션 타이머
            customerTimer = setInterval(() => {
                if (Math.random() < 0.3) {
                    const newCustomer = {
                        id: Date.now() + Math.random(),
                        type: Math.random() < 0.6 ? 'deposit' : 'loan',
                        position: -30,
                        speed: 1 + Math.random() * 2
                    };
                    
                    uiState.customers = [...uiState.customers.slice(-4), newCustomer];
                }

                uiState.customers = uiState.customers.map(customer => ({
                    ...customer,
                    position: customer.position + customer.speed
                })).filter(customer => customer.position < 400);

                uiState.tellerBusy = uiState.tellerBusy.map(() => Math.random() < 0.2);

                updateCustomerAnimation();
            }, 500);
        }
    }

    // 수동 시간 진행
    function advanceTime() {
        if (gameState.gameStarted && gameState.isBusinessHours) {
            gameState.currentTime += 1;
            
            if (gameState.currentTime >= 18) {
                gameState.currentTime = 18;
                gameState.isBusinessHours = false;
                gameState.dayEnded = true;
                uiState.showDayEndPopup = true;
                clearTimers();
            }
            
            updateTimeDisplay();
            render();
        }
    }

    // 타이머 정리
    function clearTimers() {
        if (gameTimer) {
            clearInterval(gameTimer);
            gameTimer = null;
        }
        if (customerTimer) {
            clearInterval(customerTimer);
            customerTimer = null;
        }
    }

    // 시간 표시 업데이트
    function updateTimeDisplay() {
        const timeEl = document.getElementById('current-time');
        
        if (timeEl) {
            timeEl.textContent = formatTime(gameState.currentTime);
            
            if (gameState.currentTime >= 17.5) {
                timeEl.className = 'font-mono text-red-300 animate-pulse text-sm';
            } else if (gameState.currentTime >= 17) {
                timeEl.className = 'font-mono text-yellow-300 text-sm';
            } else {
                timeEl.className = 'font-mono text-green-300 text-sm';
            }
        }

        updateWallClock();
    }

    // 벽시계 업데이트
    function updateWallClock() {
        const hour = gameState.currentTime % 12;
        const minute = (gameState.currentTime % 1) * 60;
        const hourAngle = (hour * 30) + (minute * 0.5);
        const minuteAngle = minute * 6;

        const hourHand = document.getElementById('hour-hand');
        const minuteHand = document.getElementById('minute-hand');

        if (hourHand) {
            hourHand.style.transform = `translate(-50%, -100%) rotate(${hourAngle}deg)`;
        }

        if (minuteHand) {
            minuteHand.style.transform = `translate(-50%, -100%) rotate(${minuteAngle}deg)`;
        }
    }

    // 고객 애니메이션 업데이트
    function updateCustomerAnimation() {
        const customerArea = document.getElementById('customer-area');
        if (!customerArea) return;

        customerArea.innerHTML = '';
        
        uiState.customers.forEach(customer => {
            const customerEl = document.createElement('div');
            customerEl.className = 'absolute';
            customerEl.style.left = `${customer.position}px`;
            customerEl.style.bottom = '0px';
            customerEl.style.fontSize = '12px';
            
            customerEl.innerHTML = customer.type === 'deposit' ? '👨‍💼' : '👩‍💼';
            
            customerArea.appendChild(customerEl);
        });

        // 창구 직원 업데이트
        for (let i = 0; i < 3; i++) {
            const tellerEl = document.getElementById(`teller-${i}`);
            if (tellerEl) {
                tellerEl.className = `absolute top-0 left-1/2 transform -translate-x-1/2 ${
                    uiState.tellerBusy[i] ? 'animate-bounce' : ''
                }`;
            }
        }
    }

    // 입력 모달 관련
    function openInputModal(type, currentValue, label) {
        uiState.inputType = type;
        uiState.inputValue = currentValue.toString();
        uiState.inputLabel = label;
        uiState.showInputModal = true;
        render();
        
        setTimeout(() => {
            const input = document.getElementById('modal-input');
            if (input) input.focus();
        }, 100);
    }

    function closeInputModal() {
        uiState.showInputModal = false;
        render();
    }

    function applyInputValue() {
        const numValue = parseFloat(uiState.inputValue);
        if (isNaN(numValue)) return;

        let newValue = numValue;

        switch (uiState.inputType) {
            case 'depositRate':
                newValue = Math.max(1, Math.min(5, numValue));
                gameState.depositRate = newValue;
                break;
            case 'loanRate':
                newValue = Math.max(3, Math.min(10, numValue));
                gameState.loanRate = newValue;
                break;
            case 'advertising':
                newValue = Math.max(0, Math.min(5000000, numValue));
                gameState.advertising = Math.round(newValue);
                break;
        }

        closeInputModal();
    }

    // 슬라이더 생성
    function createSlider(id, label, value, min, max, step, unit, type) {
        const formatValue = (val) => {
            if (unit === '원') {
                return formatCurrency(val);
            }
            return val + unit;
        };
        
        valueDisplay.textContent = formatValue(value);
    }

    // 메인 렌더링 함수
    function render() {
        const app = document.getElementById('app');
        
        if (!gameState.gameStarted) {
            app.innerHTML = renderStartScreen();
            return;
        }
        
        app.innerHTML = renderGameScreen();
        
        if (uiState.showDayEndPopup) {
            app.insertAdjacentHTML('beforeend', renderDayEndPopup());
        }
        
        if (uiState.showInputModal) {
            app.insertAdjacentHTML('beforeend', renderInputModal());
        }
        
        updateTimeDisplay();
        updateCustomerAnimation();
    }

    // 시작 화면 렌더링
    function renderStartScreen() {
        return `
            <div class="bg-gradient-start p-3 h-full overflow-y-auto scrollbar-hide">
                <div class="text-center mb-3">
                    <h1 class="text-lg font-bold text-white mb-2">🏦 은행王</h1>
                    <p class="text-sm text-blue-200">은행 경영 시뮬레이션</p>
                    <p class="text-xs text-blue-300 mt-1">💰 수신→운용수익 | 💸 여신→이자수익</p>
                </div>

                <div class="bg-gray-900 border-2 border-blue-400 rounded-lg p-3">
                    <div class="mb-3">
                        <label class="block text-blue-300 font-bold mb-1 text-xs">🏛️ 은행 이름:</label>
                        <input
                            type="text"
                            id="bank-name-input"
                            placeholder="은행 이름 입력"
                            value="${gameState.bankName}"
                            class="input bg-gray-700 border-gray-600 text-white text-sm"
                            onchange="gameState.bankName = this.value; render();"
                        />
                    </div>

                    <div class="bg-gray-800 p-2 rounded mb-3">
                        <h3 class="text-yellow-300 font-bold mb-1 text-xs">🎯 게임 핵심</h3>
                        <ul class="text-gray-300 text-xs space-y-1">
                            <li>💰 <strong>수신</strong>: 예금 유치 → 자금 운용</li>
                            <li>💸 <strong>여신</strong>: 자본금으로 대출 → 이자 수익</li>
                            <li>📊 <strong>목표</strong>: 이자 마진 최적화</li>
                            <li>⚠️ <strong>주의</strong>: 연체 손실, 자본금 고갈</li>
                        </ul>
                    </div>

                    <button
                        onclick="startGame()"
                        ${gameState.bankName.trim() ? '' : 'disabled'}
                        class="btn ${gameState.bankName.trim() ? 'btn-primary' : 'btn-secondary'} w-full py-2 text-sm"
                    >
                        ${gameState.bankName.trim() ? `🚀 ${gameState.bankName} 은행 시작!` : '은행 이름을 입력하세요'}
                    </button>
                </div>
            </div>
        `;
    }

    // 게임 화면 렌더링
    function renderGameScreen() {
        return `
            <div class="h-full flex flex-col bg-white">
                <!-- 상단 정보 바 -->
                <div class="bg-gray-800 text-white p-2 flex-shrink-0">
                    <div class="flex justify-between items-center mb-1">
                        <h1 class="text-sm font-bold">🏦 ${gameState.bankName}</h1>
                        <div class="text-xs text-blue-300">
                            📅 ${gameState.year}년 ${gameState.month}월 ${gameState.round}일
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <div id="current-time" class="font-mono text-sm text-green-300">
                            🕐 ${formatTime(gameState.currentTime)}
                        </div>
                        <div class="text-green-300 font-bold text-xs">
                            💰 ${formatCurrency(gameState.currentCapital)}
                        </div>
                        ${gameState.isBusinessHours ? `
                            <button 
                                onclick="advanceTime()" 
                                class="btn btn-primary text-xs px-2 py-1"
                            >
                                ⏰ +1H
                            </button>
                        ` : `
                            <button 
                                onclick="uiState.showDayEndPopup = true; render();" 
                                class="btn btn-primary text-xs px-2 py-1"
                            >
                                🌙 마감
                            </button>
                        `}
                    </div>
                </div>

                <!-- 은행 창구 애니메이션 -->
                <div class="relative overflow-hidden h-20 flex-shrink-0 bg-gradient-bank">
                    <!-- 벽시계 -->
                    <div class="absolute top-1 left-1">
                        <div class="bg-white rounded-full border-2 border-yellow-600" style="width: 24px; height: 24px;">
                            <div class="relative w-full h-full rounded-full bg-white">
                                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 text-gray-800" style="font-size: 0.4rem; line-height: 1;">12</div>
                                <div class="absolute top-1/2 right-0 transform -translate-y-1/2 text-gray-800" style="font-size: 0.4rem;">3</div>
                                <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 text-gray-800" style="font-size: 0.4rem;">6</div>
                                <div class="absolute top-1/2 left-0 transform -translate-y-1/2 text-gray-800" style="font-size: 0.4rem;">9</div>
                                
                                <div class="absolute top-1/2 left-1/2 w-1 h-1 bg-gray-800 rounded-full transform -translate-x-1/2 -translate-y-1/2 z-30"></div>
                                
                                <div id="hour-hand" class="absolute top-1/2 left-1/2 bg-gray-800 z-20" style="width: 1px; height: 6px; transform-origin: bottom; transform: translate(-50%, -100%) rotate(0deg);"></div>
                                <div id="minute-hand" class="absolute top-1/2 left-1/2 bg-gray-600 z-10" style="width: 0.5px; height: 8px; transform-origin: bottom; transform: translate(-50%, -100%) rotate(0deg);"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 바닥 -->
                    <div class="absolute bottom-0 w-full h-3 bg-gray-400 border-t-2 border-gray-500"></div>
                    
                    <!-- 창구 -->
                    <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-2">
                        ${[0, 1, 2].map(i => `
                            <div class="relative">
                                <div class="w-4 h-3 bg-yellow-800 border border-yellow-600 rounded"></div>
                                
                                <div id="teller-${i}" class="absolute top-0 left-1/2 transform -translate-x-1/2" style="font-size: 8px; margin-top: -12px;">
                                    👨‍💼
                                </div>
                                
                                <div class="absolute left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-1 rounded text-xs" style="font-size: 0.5rem; bottom: -8px;">
                                    ${i + 1}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- 고객들 -->
                    <div id="customer-area" class="absolute bottom-1 left-0 w-full h-4"></div>

                    <!-- 은행 간판 -->
                    <div class="absolute top-1 left-1/2 transform -translate-x-1/2">
                        <div class="bg-blue-800 text-white rounded border border-blue-600 px-2 py-1">
                            <h2 class="text-xs font-bold text-center">${gameState.bankName}</h2>
                        </div>
                    </div>

                    <!-- 금리 안내판 -->
                    <div class="absolute top-1 right-1 bg-white border border-gray-300 rounded p-1" style="font-size: 0.5rem;">
                        <div class="font-bold text-gray-800 mb-1">💰 금리</div>
                        <div class="flex justify-between">
                            <span>예금:</span>
                            <span class="font-bold text-blue-600">${gameState.depositRate}%</span>
                        </div>
                        <div class="flex justify-between">
                            <span>대출:</span>
                            <span class="font-bold text-green-600">${gameState.loanRate}%</span>
                        </div>
                    </div>
                </div>

                <!-- 메인 콘텐츠 -->
                <div class="flex-1 overflow-y-auto scrollbar-hide p-2">
                    <!-- 핵심 지표 -->
                    <div class="mb-2">
                        <h3 class="text-sm font-bold text-gray-800 mb-1">📊 경영 현황</h3>
                        
                        <!-- 자산/부채 현황 -->
                        <div class="grid grid-cols-3 gap-1 mb-2">
                            <div class="bg-blue-100 p-2 rounded">
                                <div class="text-blue-800 font-bold text-xs">💰 수신</div>
                                <div class="text-xs">
                                    <div class="flex justify-between">
                                        <span>고객:</span>
                                        <span class="font-bold text-blue-600">${gameState.depositCustomers}명</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>예금:</span>
                                        <span class="font-bold text-blue-600">${formatCurrency(gameState.totalDepositBalance)}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-green-100 p-2 rounded">
                                <div class="text-green-800 font-bold text-xs">💸 여신</div>
                                <div class="text-xs">
                                    <div class="flex justify-between">
                                        <span>고객:</span>
                                        <span class="font-bold text-green-600">${gameState.loanCustomers}명</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>대출:</span>
                                        <span class="font-bold text-green-600">${formatCurrency(gameState.totalLoanBalance)}</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-yellow-100 p-2 rounded">
                                <div class="text-yellow-800 font-bold text-xs">🏦 현황</div>
                                <div class="text-xs">
                                    <div class="flex justify-between">
                                        <span>자본:</span>
                                        <span class="font-bold text-yellow-600">${formatCurrency(gameState.currentCapital)}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>수익:</span>
                                        <span class="font-bold ${gameState.totalProfit >= 0 ? 'text-green-600' : 'text-red-600'}">
                                            ${formatCurrency(gameState.totalProfit)}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        ${gameState.currentCapital < gameState.initialCapital * 0.1 ? `
                            <div class="alert alert-danger mb-2">
                                <div class="flex items-center">
                                    <span class="mr-1">⚠️</span>
                                    <p class="font-bold text-xs">자본금 부족 경고!</p>
                                </div>
                            </div>
                        ` : ''}
                    </div>

                    ${uiState.marketReactions.length > 0 ? `
                        <div class="mb-2">
                            <h3 class="text-xs font-bold text-gray-800 mb-1">💬 고객 반응</h3>
                            ${uiState.marketReactions.map(reaction => `
                                <div class="p-1 rounded border-l-2 mb-1 ${
                                    reaction.type === 'positive' ? 'bg-green-50 border-green-400' :
                                    'bg-red-50 border-red-400'
                                }">
                                    <div class="flex items-center">
                                        <span class="text-xs mr-1">${reaction.icon}</span>
                                        <p class="text-xs">${reaction.message}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}

                    ${uiState.currentEvent ? `
                        <div class="alert alert-warning mb-2">
                            <div class="flex items-center">
                                <span class="mr-1">⚠️</span>
                                <div>
                                    <h3 class="text-xs font-bold">📰 ${uiState.currentEvent.name}</h3>
                                    <p class="text-xs">${uiState.currentEvent.effect}</p>
                                </div>
                            </div>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
    }

    // 하루 마감 팝업 렌더링
    function renderDayEndPopup() {
        return `
            <div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-2">
                <div class="bg-blue-900 border-2 border-blue-400 rounded-lg p-3 w-full max-h-full overflow-y-auto scrollbar-hide">
                    <div class="text-center mb-2">
                        <h3 class="text-lg font-bold text-white mb-1">🌙 영업 마감</h3>
                        <p class="text-blue-200 text-xs">내일 영업을 준비해주세요</p>
                    </div>

                    ${uiState.dayResults ? `
                        <div class="bg-blue-800 p-2 rounded mb-2">
                            <h4 class="text-blue-200 font-bold mb-1 text-xs">📊 오늘 결과</h4>
                            <div class="text-xs text-blue-100 space-y-1">
                                <div class="grid grid-cols-2 gap-1">
                                    <div>📥 예금: ${Math.round(uiState.dayResults.depositCustomers)}명</div>
                                    <div>📤 대출: ${Math.round(uiState.dayResults.loanCustomers)}명</div>
                                </div>
                                <div class="border-t border-blue-600 pt-1">
                                    <div class="text-green-300">💰 수익: ${formatCurrency(uiState.dayResults.assetOperationIncome + uiState.dayResults.loanInterestIncome)}</div>
                                    <div class="text-red-300">💸 비용: ${formatCurrency(uiState.dayResults.depositInterestCost + uiState.dayResults.defaultLoss + uiState.dayResults.operatingCost)}</div>
                                    <div class="font-bold ${uiState.dayResults.netIncome >= 0 ? 'text-green-300' : 'text-red-300'}">
                                        📈 순이익: ${formatCurrency(uiState.dayResults.netIncome)}
                                    </div>
                                </div>
                                ${uiState.dayResults.capitalShortage ? `
                                    <div class="text-yellow-300 text-xs">
                                        ⚠️ 자본금 부족으로 대출 제한
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="space-y-2 mb-3">
                        ${createSlider('deposit-rate-slider', '💰 수신 이자율', gameState.depositRate, 1, 5, 0.1, '%', 'depositRate')}
                        ${createSlider('loan-rate-slider', '💸 여신 이자율', gameState.loanRate, 3, 10, 0.1, '%', 'loanRate')}
                        ${createSlider('advertising-slider', '📢 광고비', gameState.advertising, 0, 5000000, 100000, '원', 'advertising')}
                    </div>

                    <div class="flex justify-center">
                        <button
                            onclick="processDay()"
                            class="btn btn-primary w-full py-2 text-sm"
                        >
                            🌅 다음 날 영업 시작
                        </button>
                    </div>
                </div>
            </div>
        `;
    }

    // 입력 모달 렌더링
    function renderInputModal() {
        return `
            <div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-3">
                <div class="bg-white rounded-lg w-full">
                    <div class="p-3">
                        <h3 class="text-base font-bold text-gray-800 mb-2">
                            ${uiState.inputLabel} 직접 입력
                        </h3>
                        
                        <div class="mb-3">
                            <label class="block text-xs font-bold text-gray-700 mb-1">
                                새로운 값을 입력하세요
                            </label>
                            <input
                                type="number"
                                id="modal-input"
                                value="${uiState.inputValue}"
                                onchange="uiState.inputValue = this.value"
                                onkeypress="if(event.key === 'Enter') applyInputValue(); if(event.key === 'Escape') closeInputModal();"
                                class="input text-sm"
                                placeholder="숫자를 입력하세요"
                            />
                            <div class="text-xs text-gray-600 mt-1">
                                ${uiState.inputType === 'depositRate' ? '범위: 1.0% ~ 5.0%' : ''}
                                ${uiState.inputType === 'loanRate' ? '범위: 3.0% ~ 10.0%' : ''}
                                ${uiState.inputType === 'advertising' ? '범위: 0원 ~ 500만원' : ''}
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <button
                                onclick="closeInputModal()"
                                class="btn btn-secondary flex-1 text-sm"
                            >
                                취소
                            </button>
                            <button
                                onclick="applyInputValue()"
                                class="btn btn-primary flex-1 text-sm"
                            >
                                적용
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // 초기화
    function init() {
        render();
    }

    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', init);
</script>
```

</body>
</html>Currency(val);
                }
                return val + unit;
            };

```
        return `
            <div class="bg-gray-100 p-2 rounded mb-2">
                <div class="flex justify-between items-center mb-1">
                    <label class="font-bold text-gray-800 text-xs">${label}</label>
                    <div class="flex items-center gap-1">
                        <span class="font-mono font-bold text-blue-600 text-xs" id="${id}-value">
                            ${formatValue(value)}
                        </span>
                        <button
                            onclick="openInputModal('${type}', ${value}, '${label}')"
                            class="btn btn-secondary"
                            style="font-size: 0.6rem; padding: 0.125rem 0.25rem;"
                        >
                            직접
                        </button>
                    </div>
                </div>
                
                <input
                    type="range"
                    id="${id}"
                    min="${min}"
                    max="${max}"
                    step="${step}"
                    value="${value}"
                    class="slider w-full"
                    onchange="updateSliderValue('${id}', '${type}', '${unit}')"
                />
            </div>
        `;
    }

    // 슬라이더 값 업데이트
    function updateSliderValue(id, type, unit) {
        const slider = document.getElementById(id);
        const valueDisplay = document.getElementById(id + '-value');
        
        if (!slider || !valueDisplay) return;
        
        const value = parseFloat(slider.value);
        
        switch (type) {
            case 'depositRate':
                gameState.depositRate = value;
                break;
            case 'loanRate':
                gameState.loanRate = value;
                break;
            case 'advertising':
                gameState.advertising = parseInt(value);
                break;
        }
        
        const formatValue = (val) => {
            if (unit === '원') {
                return format
```