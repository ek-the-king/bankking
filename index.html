<!DOCTYPE html>

<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=360, height=550, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ¦ ì€í–‰ç‹ - ì€í–‰ ê²½ì˜ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        width: 360px;
        height: 550px;
        overflow: hidden;
        font-size: 12px;
        position: fixed;
        top: 0;
        left: 0;
        background: #f0f9ff;
    }

    /* ê¸°ë³¸ ìœ í‹¸ë¦¬í‹° */
    .hidden { display: none; }
    .fixed { position: fixed; }
    .absolute { position: absolute; }
    .relative { position: relative; }
    .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
    
    .flex { display: flex; }
    .flex-col { flex-direction: column; }
    .items-center { align-items: center; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }
    .gap-1 { gap: 0.25rem; }
    .gap-2 { gap: 0.5rem; }

    .w-full { width: 100%; }
    .h-full { height: 100%; }
    
    .p-1 { padding: 0.25rem; }
    .p-2 { padding: 0.5rem; }
    .p-3 { padding: 0.75rem; }
    .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
    .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
    .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }

    .mb-1 { margin-bottom: 0.25rem; }
    .mb-2 { margin-bottom: 0.5rem; }
    .mb-3 { margin-bottom: 0.75rem; }
    .mt-1 { margin-top: 0.25rem; }
    .mt-2 { margin-top: 0.5rem; }

    .text-xs { font-size: 0.7rem; line-height: 1.2; }
    .text-sm { font-size: 0.8rem; line-height: 1.3; }
    .text-base { font-size: 0.9rem; line-height: 1.4; }
    .text-lg { font-size: 1rem; line-height: 1.4; }

    .font-bold { font-weight: 700; }
    .font-mono { font-family: ui-monospace, SFMono-Regular, monospace; }
    .text-center { text-align: center; }

    /* ìƒ‰ìƒ */
    .text-white { color: white; }
    .text-gray-600 { color: #4b5563; }
    .text-gray-700 { color: #374151; }
    .text-gray-800 { color: #1f2937; }
    .text-blue-200 { color: #bfdbfe; }
    .text-blue-300 { color: #93c5fd; }
    .text-blue-600 { color: #2563eb; }
    .text-blue-800 { color: #1e40af; }
    .text-green-300 { color: #86efac; }
    .text-green-600 { color: #16a34a; }
    .text-red-300 { color: #fca5a5; }
    .text-red-600 { color: #dc2626; }
    .text-yellow-300 { color: #fde047; }
    .text-yellow-600 { color: #ca8a04; }
    .text-yellow-800 { color: #854d0e; }

    .bg-white { background-color: white; }
    .bg-gray-100 { background-color: #f3f4f6; }
    .bg-gray-700 { background-color: #374151; }
    .bg-gray-800 { background-color: #1f2937; }
    .bg-gray-900 { background-color: #111827; }
    .bg-blue-50 { background-color: #eff6ff; }
    .bg-blue-100 { background-color: #dbeafe; }
    .bg-blue-600 { background-color: #2563eb; }
    .bg-blue-800 { background-color: #1e40af; }
    .bg-blue-900 { background-color: #1e3a8a; }
    .bg-green-50 { background-color: #f0fdf4; }
    .bg-green-100 { background-color: #dcfce7; }
    .bg-red-50 { background-color: #fef2f2; }
    .bg-yellow-50 { background-color: #fefce8; }
    .bg-yellow-100 { background-color: #fef3c7; }

    /* ê·¸ë¼ë””ì–¸íŠ¸ */
    .bg-gradient-start {
        background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 50%, #1e40af 100%);
    }
    .bg-gradient-bank {
        background: linear-gradient(180deg, #dbeafe 0%, #bfdbfe 100%);
    }

    /* ë²„íŠ¼ */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border: none;
        border-radius: 0.375rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.75rem;
        padding: 0.375rem 0.75rem;
    }
    .btn:active { transform: translateY(1px); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-primary { background-color: #2563eb; color: white; }
    .btn-secondary { background-color: #6b7280; color: white; }

    /* ì…ë ¥ */
    .input {
        width: 100%;
        padding: 0.375rem;
        border: 1px solid #d1d5db;
        border-radius: 0.375rem;
        font-size: 0.75rem;
    }
    .input:focus {
        outline: none;
        border-color: #2563eb;
    }

    /* ìŠ¬ë¼ì´ë” */
    .slider {
        -webkit-appearance: none;
        width: 100%;
        height: 0.75rem;
        border-radius: 0.375rem;
        background: #d1d5db;
        outline: none;
        cursor: pointer;
    }
    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 1rem;
        width: 1rem;
        border-radius: 50%;
        background: #2563eb;
        cursor: pointer;
        border: 1px solid #1e40af;
    }

    /* ì¹´ë“œ */
    .card {
        background: white;
        border-radius: 0.375rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        padding: 0.5rem;
    }

    /* ê²½ê³  */
    .alert {
        padding: 0.375rem;
        border-radius: 0.375rem;
        border-left: 3px solid;
    }
    .alert-warning {
        background-color: #fef3c7;
        border-color: #f59e0b;
        color: #92400e;
    }
    .alert-danger {
        background-color: #fee2e2;
        border-color: #ef4444;
        color: #991b1b;
    }

    /* ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }
    @keyframes bounce {
        0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
        40%, 43% { transform: translate3d(0, -8px, 0); }
        70% { transform: translate3d(0, -4px, 0); }
    }
    .animate-pulse { animation: pulse 2s infinite; }
    .animate-bounce { animation: bounce 1s infinite; }

    /* ê·¸ë¦¬ë“œ */
    .grid { display: grid; }
    .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
    .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }

    /* í…Œë‘ë¦¬ */
    .border { border: 1px solid #d1d5db; }
    .border-2 { border: 2px solid; }
    .border-blue-400 { border-color: #60a5fa; }
    .border-blue-600 { border-color: #2563eb; }
    .border-yellow-600 { border-color: #ca8a04; }
    .border-green-400 { border-color: #4ade80; }
    .border-red-400 { border-color: #f87171; }
    .rounded { border-radius: 0.25rem; }
    .rounded-lg { border-radius: 0.5rem; }
    .rounded-full { border-radius: 50%; }

    /* ìœ„ì¹˜ */
    .top-0 { top: 0; }
    .top-1 { top: 0.25rem; }
    .bottom-0 { bottom: 0; }
    .bottom-1 { bottom: 0.25rem; }
    .bottom-2 { bottom: 0.5rem; }
    .left-0 { left: 0; }
    .left-1 { left: 0.25rem; }
    .left-1\/2 { left: 50%; }
    .right-1 { right: 0.25rem; }
    .transform { transform: translateZ(0); }
    .-translate-x-1\/2 { transform: translateX(-50%); }
    .-translate-y-1\/2 { transform: translateY(-50%); }

    /* í¬ê¸° */
    .w-4 { width: 1rem; }
    .w-6 { width: 1.5rem; }
    .h-3 { height: 0.75rem; }
    .h-4 { height: 1rem; }
    .h-6 { height: 1.5rem; }
    .h-20 { height: 5rem; }
    .h-24 { height: 6rem; }

    /* Z-ì¸ë±ìŠ¤ */
    .z-10 { z-index: 10; }
    .z-20 { z-index: 20; }
    .z-30 { z-index: 30; }
    .z-40 { z-index: 40; }
    .z-50 { z-index: 50; }

    /* ì˜¤ë²„í”Œë¡œìš° */
    .overflow-hidden { overflow: hidden; }
    .overflow-y-auto { overflow-y: auto; }
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* í”Œë ‰ìŠ¤ */
    .flex-1 { flex: 1; }
    .flex-shrink-0 { flex-shrink: 0; }

    /* ê³µê°„ */
    .space-y-1 > * + * { margin-top: 0.25rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }

    /* íˆ¬ëª…ë„ */
    .bg-opacity-75 { background-color: rgba(0, 0, 0, 0.75); }
</style>
```

</head>
<body>
    <div id="app"></div>

```
<script>
    // ê²Œì„ ìƒíƒœ
    let gameState = {
        bankName: "",
        initialCapital: 50000000000,
        currentCapital: 50000000000,
        totalProfit: 0,
        depositRate: 2.5,
        depositCustomers: 100,
        avgDepositAmount: 50000000,
        totalDepositBalance: 5000000000,
        assetYield: 3.5,
        loanRate: 5.0,
        loanCustomers: 50,
        avgLoanAmount: 100000000,
        totalLoanBalance: 5000000000,
        defaultRate: 0.05,
        advertising: 1000000,
        round: 1,
        year: 1,
        month: 1,
        currentTime: 9,
        isBusinessHours: true,
        dayEnded: false,
        gameStarted: false
    };

    // UI ìƒíƒœ
    let uiState = {
        currentEvent: null,
        marketReactions: [],
        showDayEndPopup: false,
        customers: [],
        tellerBusy: [false, false, false],
        dayResults: null,
        showInputModal: false,
        inputType: '',
        inputValue: '',
        inputLabel: ''
    };

    // íƒ€ì´ë¨¸ë“¤
    let gameTimer = null;
    let customerTimer = null;

    // í†µí™” í¬ë§·íŒ…
    function formatCurrency(amount) {
        if (amount >= 1000000000000) {
            return `${(amount / 1000000000000).toFixed(1)}ì¡°ì›`;
        } else if (amount >= 100000000) {
            return `${(amount / 100000000).toFixed(0)}ì–µì›`;
        } else if (amount >= 10000) {
            return `${(amount / 10000).toFixed(0)}ë§Œì›`;
        }
        return `${Math.round(amount / 1000)}ì²œì›`;
    }

    // ì‹œê°„ í¬ë§·íŒ…
    function formatTime(time) {
        const hour = Math.floor(time);
        const minute = Math.round((time % 1) * 60);
        return `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
    }

    // ì‹œì¥ ì´ë²¤íŠ¸
    const marketEvents = [
        { name: "ê²½ê¸° í˜¸í™©", effect: "ê³ ê° ìˆ˜ +25%, ìš´ìš©ìˆ˜ìµ +0.5%p", multiplier: 1.25, yieldBonus: 0.5, defaultChange: -0.3 },
        { name: "ê²½ê¸° ì¹¨ì²´", effect: "ê³ ê° ìˆ˜ -20%, ìš´ìš©ìˆ˜ìµ -0.3%p", multiplier: 0.8, yieldBonus: -0.3, defaultChange: 0.6 },
        { name: "ê¸ˆë¦¬ ì¸ìƒ", effect: "ì˜ˆê¸ˆ ê³ ê° +20%, ëŒ€ì¶œ ê³ ê° -15%", depositMultiplier: 1.2, loanMultiplier: 0.85, defaultChange: 0.2 },
        { name: "ë¶€ë™ì‚° í˜¸í™©", effect: "ëŒ€ì¶œ ìˆ˜ìš” ê¸‰ì¦ +40%", loanMultiplier: 1.4, defaultChange: -0.1 },
        { name: "ì•ˆì •ì  ì‹œì¥", effect: "ë³€í™” ì—†ìŒ", multiplier: 1.0, defaultChange: 0 }
    ];

    // ì‹œì¥ ë°˜ì‘ ìƒì„±
    function generateMarketReactions(depositRate, loanRate, bankName) {
        const reactions = [];

        if (depositRate >= 3.3) {
            reactions.push({
                type: 'positive',
                icon: 'ğŸ˜Š',
                message: `"${bankName} ì˜ˆê¸ˆ ${depositRate}%! ì¢‹ë„¤ìš”!"`
            });
        } else if (depositRate < 2.3) {
            reactions.push({
                type: 'negative',
                icon: 'ğŸ˜',
                message: `"ì˜ˆê¸ˆ ${depositRate}%ëŠ” ë„ˆë¬´ ë‚®ì•„ìš”"`
            });
        }

        if (loanRate <= 4.7) {
            reactions.push({
                type: 'positive',
                icon: 'ğŸ‰',
                message: `"ëŒ€ì¶œ ${loanRate}%! ì €ë ´í•˜ë„¤ìš”!"`
            });
        } else if (loanRate > 5.7) {
            reactions.push({
                type: 'negative',
                icon: 'ğŸ˜¤',
                message: `"ëŒ€ì¶œ ${loanRate}%ëŠ” ë¹„ì‹¸ìš”"`
            });
        }

        return reactions.slice(0, 2);
    }

    // í•˜ë£¨ ê²°ê³¼ ê³„ì‚°
    function calculateDayResults() {
        const event = marketEvents[Math.floor(Math.random() * marketEvents.length)];
        uiState.currentEvent = event;

        const adEffect = Math.min(gameState.advertising / 1000000, 3);

        const baseDepositCustomers = Math.max(10, 
            100 - (gameState.depositRate - 2.8) * (-30) + adEffect * 15
        );
        const newDepositCustomers = Math.floor(baseDepositCustomers * (event.depositMultiplier || event.multiplier || 1));
        const newTotalDepositBalance = newDepositCustomers * gameState.avgDepositAmount;

        const baseLoanCustomers = Math.max(5,
            80 - (gameState.loanRate - 5.2) * 20 + adEffect * 10
        );
        const newLoanCustomers = Math.floor(baseLoanCustomers * (event.loanMultiplier || event.multiplier || 1));
        const newLoanExecuted = newLoanCustomers * gameState.avgLoanAmount;

        const actualLoanExecuted = gameState.currentCapital >= newLoanExecuted ? 
            newLoanExecuted : gameState.currentCapital;
        const actualNewLoanCustomers = actualLoanExecuted / gameState.avgLoanAmount;
        const newTotalLoanBalance = gameState.totalLoanBalance + actualLoanExecuted;

        const adjustedDefaultRate = Math.max(0.01, Math.min(0.25, 
            (gameState.defaultRate + Math.random() * 0.1 - 0.05) * (1 + (event.defaultChange || 0))
        ));

        const depositInterestCost = newTotalDepositBalance * (gameState.depositRate / 100);
        const assetOperationIncome = newTotalDepositBalance * ((gameState.assetYield + (event.yieldBonus || 0)) / 100);
        const loanInterestIncome = newTotalLoanBalance * (gameState.loanRate / 100);
        const defaultLoss = newTotalLoanBalance * adjustedDefaultRate;
        const operatingCost = (gameState.initialCapital * 0.015) + gameState.advertising;

        const netIncome = assetOperationIncome + loanInterestIncome - depositInterestCost - defaultLoss - operatingCost;

        return {
            event,
            depositCustomers: newDepositCustomers,
            totalDepositBalance: newTotalDepositBalance,
            depositInterestCost,
            assetOperationIncome,
            loanCustomers: actualNewLoanCustomers,
            newLoanExecuted: actualLoanExecuted,
            totalLoanBalance: newTotalLoanBalance,
            loanInterestIncome,
            defaultLoss,
            newCurrentCapital: Math.max(0, gameState.currentCapital - actualLoanExecuted),
            operatingCost,
            netIncome,
            capitalShortage: newLoanExecuted > gameState.currentCapital
        };
    }

    // í•˜ë£¨ ì²˜ë¦¬
    function processDay() {
        const results = calculateDayResults();
        uiState.dayResults = results;

        const nextMonth = gameState.month === 12 ? 1 : gameState.month + 1;
        const nextYear = gameState.month === 12 ? gameState.year + 1 : gameState.year;

        gameState.depositCustomers = results.depositCustomers;
        gameState.loanCustomers = results.loanCustomers;
        gameState.totalDepositBalance = results.totalDepositBalance;
        gameState.totalLoanBalance = results.totalLoanBalance;
        gameState.currentCapital = results.newCurrentCapital;
        gameState.totalProfit += results.netIncome;
        gameState.defaultRate = results.defaultRate || gameState.defaultRate;
        gameState.round += 1;
        gameState.month = nextMonth;
        gameState.year = nextYear;
        gameState.currentTime = 9;
        gameState.isBusinessHours = true;
        gameState.dayEnded = false;

        uiState.marketReactions = generateMarketReactions(gameState.depositRate, gameState.loanRate, gameState.bankName);
        uiState.showDayEndPopup = false;

        startTimers();
        render();
    }

    // ê²Œì„ ì‹œì‘
    function startGame() {
        gameState.gameStarted = true;
        gameState.totalDepositBalance = gameState.depositCustomers * gameState.avgDepositAmount;
        gameState.totalLoanBalance = gameState.loanCustomers * gameState.avgLoanAmount;
        
        startTimers();
        render();
    }

    // íƒ€ì´ë¨¸ ì‹œì‘
    function startTimers() {
        clearTimers();

        if (gameState.gameStarted && gameState.isBusinessHours) {
            // ê²Œì„ ì‹œê°„ íƒ€ì´ë¨¸
            gameTimer = setInterval(() => {
                gameState.currentTime += 0.3;
                
                if (gameState.currentTime >= 18) {
                    gameState.currentTime = 18;
                    gameState.isBusinessHours = false;
                    gameState.dayEnded = true;
                    uiState.showDayEndPopup = true;
                    clearTimers();
                    render();
                }
                
                updateTimeDisplay();
            }, 1000);

            // ê³ ê° ì• ë‹ˆë©”ì´ì…˜ íƒ€ì´ë¨¸
            customerTimer = setInterval(() => {
                if (Math.random() < 0.3) {
                    const newCustomer = {
                        id: Date.now() + Math.random(),
                        type: Math.random() < 0.6 ? 'deposit' : 'loan',
                        position: -30,
                        speed: 1 + Math.random() * 2
                    };
                    
                    uiState.customers = [...uiState.customers.slice(-4), newCustomer];
                }

                uiState.customers = uiState.customers.map(customer => ({
                    ...customer,
                    position: customer.position + customer.speed
                })).filter(customer => customer.position < 400);

                uiState.tellerBusy = uiState.tellerBusy.map(() => Math.random() < 0.2);

                updateCustomerAnimation();
            }, 500);
        }
    }

    // ìˆ˜ë™ ì‹œê°„ ì§„í–‰
    function advanceTime() {
        if (gameState.gameStarted && gameState.isBusinessHours) {
            gameState.currentTime += 1;
            
            if (gameState.currentTime >= 18) {
                gameState.currentTime = 18;
                gameState.isBusinessHours = false;
                gameState.dayEnded = true;
                uiState.showDayEndPopup = true;
                clearTimers();
            }
            
            updateTimeDisplay();
            render();
        }
    }

    // íƒ€ì´ë¨¸ ì •ë¦¬
    function clearTimers() {
        if (gameTimer) {
            clearInterval(gameTimer);
            gameTimer = null;
        }
        if (customerTimer) {
            clearInterval(customerTimer);
            customerTimer = null;
        }
    }

    // ì‹œê°„ í‘œì‹œ ì—…ë°ì´íŠ¸
    function updateTimeDisplay() {
        const timeEl = document.getElementById('current-time');
        
        if (timeEl) {
            timeEl.textContent = formatTime(gameState.currentTime);
            
            if (gameState.currentTime >= 17.5) {
                timeEl.className = 'font-mono text-red-300 animate-pulse text-sm';
            } else if (gameState.currentTime >= 17) {
                timeEl.className = 'font-mono text-yellow-300 text-sm';
            } else {
                timeEl.className = 'font-mono text-green-300 text-sm';
            }
        }

        updateWallClock();
    }

    // ë²½ì‹œê³„ ì—…ë°ì´íŠ¸
    function updateWallClock() {
        const hour = gameState.currentTime % 12;
        const minute = (gameState.currentTime % 1) * 60;
        const hourAngle = (hour * 30) + (minute * 0.5);
        const minuteAngle = minute * 6;

        const hourHand = document.getElementById('hour-hand');
        const minuteHand = document.getElementById('minute-hand');

        if (hourHand) {
            hourHand.style.transform = `translate(-50%, -100%) rotate(${hourAngle}deg)`;
        }

        if (minuteHand) {
            minuteHand.style.transform = `translate(-50%, -100%) rotate(${minuteAngle}deg)`;
        }
    }

    // ê³ ê° ì• ë‹ˆë©”ì´ì…˜ ì—…ë°ì´íŠ¸
    function updateCustomerAnimation() {
        const customerArea = document.getElementById('customer-area');
        if (!customerArea) return;

        customerArea.innerHTML = '';
        
        uiState.customers.forEach(customer => {
            const customerEl = document.createElement('div');
            customerEl.className = 'absolute';
            customerEl.style.left = `${customer.position}px`;
            customerEl.style.bottom = '0px';
            customerEl.style.fontSize = '12px';
            
            customerEl.innerHTML = customer.type === 'deposit' ? 'ğŸ‘¨â€ğŸ’¼' : 'ğŸ‘©â€ğŸ’¼';
            
            customerArea.appendChild(customerEl);
        });

        // ì°½êµ¬ ì§ì› ì—…ë°ì´íŠ¸
        for (let i = 0; i < 3; i++) {
            const tellerEl = document.getElementById(`teller-${i}`);
            if (tellerEl) {
                tellerEl.className = `absolute top-0 left-1/2 transform -translate-x-1/2 ${
                    uiState.tellerBusy[i] ? 'animate-bounce' : ''
                }`;
            }
        }
    }

    // ì…ë ¥ ëª¨ë‹¬ ê´€ë ¨
    function openInputModal(type, currentValue, label) {
        uiState.inputType = type;
        uiState.inputValue = currentValue.toString();
        uiState.inputLabel = label;
        uiState.showInputModal = true;
        render();
        
        setTimeout(() => {
            const input = document.getElementById('modal-input');
            if (input) input.focus();
        }, 100);
    }

    function closeInputModal() {
        uiState.showInputModal = false;
        render();
    }

    function applyInputValue() {
        const numValue = parseFloat(uiState.inputValue);
        if (isNaN(numValue)) return;

        let newValue = numValue;

        switch (uiState.inputType) {
            case 'depositRate':
                newValue = Math.max(1, Math.min(5, numValue));
                gameState.depositRate = newValue;
                break;
            case 'loanRate':
                newValue = Math.max(3, Math.min(10, numValue));
                gameState.loanRate = newValue;
                break;
            case 'advertising':
                newValue = Math.max(0, Math.min(5000000, numValue));
                gameState.advertising = Math.round(newValue);
                break;
        }

        closeInputModal();
    }

    // ìŠ¬ë¼ì´ë” ìƒì„±
    function createSlider(id, label, value, min, max, step, unit, type) {
        const formatValue = (val) => {
            if (unit === 'ì›') {
                return formatCurrency(val);
            }
            return val + unit;
        };
        
        valueDisplay.textContent = formatValue(value);
    }

    // ë©”ì¸ ë Œë”ë§ í•¨ìˆ˜
    function render() {
        const app = document.getElementById('app');
        
        if (!gameState.gameStarted) {
            app.innerHTML = renderStartScreen();
            return;
        }
        
        app.innerHTML = renderGameScreen();
        
        if (uiState.showDayEndPopup) {
            app.insertAdjacentHTML('beforeend', renderDayEndPopup());
        }
        
        if (uiState.showInputModal) {
            app.insertAdjacentHTML('beforeend', renderInputModal());
        }
        
        updateTimeDisplay();
        updateCustomerAnimation();
    }

    // ì‹œì‘ í™”ë©´ ë Œë”ë§
    function renderStartScreen() {
        return `
            <div class="bg-gradient-start p-3 h-full overflow-y-auto scrollbar-hide">
                <div class="text-center mb-3">
                    <h1 class="text-lg font-bold text-white mb-2">ğŸ¦ ì€í–‰ç‹</h1>
                    <p class="text-sm text-blue-200">ì€í–‰ ê²½ì˜ ì‹œë®¬ë ˆì´ì…˜</p>
                    <p class="text-xs text-blue-300 mt-1">ğŸ’° ìˆ˜ì‹ â†’ìš´ìš©ìˆ˜ìµ | ğŸ’¸ ì—¬ì‹ â†’ì´ììˆ˜ìµ</p>
                </div>

                <div class="bg-gray-900 border-2 border-blue-400 rounded-lg p-3">
                    <div class="mb-3">
                        <label class="block text-blue-300 font-bold mb-1 text-xs">ğŸ›ï¸ ì€í–‰ ì´ë¦„:</label>
                        <input
                            type="text"
                            id="bank-name-input"
                            placeholder="ì€í–‰ ì´ë¦„ ì…ë ¥"
                            value="${gameState.bankName}"
                            class="input bg-gray-700 border-gray-600 text-white text-sm"
                            onchange="gameState.bankName = this.value; render();"
                        />
                    </div>

                    <div class="bg-gray-800 p-2 rounded mb-3">
                        <h3 class="text-yellow-300 font-bold mb-1 text-xs">ğŸ¯ ê²Œì„ í•µì‹¬</h3>
                        <ul class="text-gray-300 text-xs space-y-1">
                            <li>ğŸ’° <strong>ìˆ˜ì‹ </strong>: ì˜ˆê¸ˆ ìœ ì¹˜ â†’ ìê¸ˆ ìš´ìš©</li>
                            <li>ğŸ’¸ <strong>ì—¬ì‹ </strong>: ìë³¸ê¸ˆìœ¼ë¡œ ëŒ€ì¶œ â†’ ì´ì ìˆ˜ìµ</li>
                            <li>ğŸ“Š <strong>ëª©í‘œ</strong>: ì´ì ë§ˆì§„ ìµœì í™”</li>
                            <li>âš ï¸ <strong>ì£¼ì˜</strong>: ì—°ì²´ ì†ì‹¤, ìë³¸ê¸ˆ ê³ ê°ˆ</li>
                        </ul>
                    </div>

                    <button
                        onclick="startGame()"
                        ${gameState.bankName.trim() ? '' : 'disabled'}
                        class="btn ${gameState.bankName.trim() ? 'btn-primary' : 'btn-secondary'} w-full py-2 text-sm"
                    >
                        ${gameState.bankName.trim() ? `ğŸš€ ${gameState.bankName} ì€í–‰ ì‹œì‘!` : 'ì€í–‰ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”'}
                    </button>
                </div>
            </div>
        `;
    }

    // ê²Œì„ í™”ë©´ ë Œë”ë§
    function renderGameScreen() {
        return `
            <div class="h-full flex flex-col bg-white">
                <!-- ìƒë‹¨ ì •ë³´ ë°” -->
                <div class="bg-gray-800 text-white p-2 flex-shrink-0">
                    <div class="flex justify-between items-center mb-1">
                        <h1 class="text-sm font-bold">ğŸ¦ ${gameState.bankName}</h1>
                        <div class="text-xs text-blue-300">
                            ğŸ“… ${gameState.year}ë…„ ${gameState.month}ì›” ${gameState.round}ì¼
                        </div>
                    </div>
                    <div class="flex justify-between items-center">
                        <div id="current-time" class="font-mono text-sm text-green-300">
                            ğŸ• ${formatTime(gameState.currentTime)}
                        </div>
                        <div class="text-green-300 font-bold text-xs">
                            ğŸ’° ${formatCurrency(gameState.currentCapital)}
                        </div>
                        ${gameState.isBusinessHours ? `
                            <button 
                                onclick="advanceTime()" 
                                class="btn btn-primary text-xs px-2 py-1"
                            >
                                â° +1H
                            </button>
                        ` : `
                            <button 
                                onclick="uiState.showDayEndPopup = true; render();" 
                                class="btn btn-primary text-xs px-2 py-1"
                            >
                                ğŸŒ™ ë§ˆê°
                            </button>
                        `}
                    </div>
                </div>

                <!-- ì€í–‰ ì°½êµ¬ ì• ë‹ˆë©”ì´ì…˜ -->
                <div class="relative overflow-hidden h-20 flex-shrink-0 bg-gradient-bank">
                    <!-- ë²½ì‹œê³„ -->
                    <div class="absolute top-1 left-1">
                        <div class="bg-white rounded-full border-2 border-yellow-600" style="width: 24px; height: 24px;">
                            <div class="relative w-full h-full rounded-full bg-white">
                                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 text-gray-800" style="font-size: 0.4rem; line-height: 1;">12</div>
                                <div class="absolute top-1/2 right-0 transform -translate-y-1/2 text-gray-800" style="font-size: 0.4rem;">3</div>
                                <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 text-gray-800" style="font-size: 0.4rem;">6</div>
                                <div class="absolute top-1/2 left-0 transform -translate-y-1/2 text-gray-800" style="font-size: 0.4rem;">9</div>
                                
                                <div class="absolute top-1/2 left-1/2 w-1 h-1 bg-gray-800 rounded-full transform -translate-x-1/2 -translate-y-1/2 z-30"></div>
                                
                                <div id="hour-hand" class="absolute top-1/2 left-1/2 bg-gray-800 z-20" style="width: 1px; height: 6px; transform-origin: bottom; transform: translate(-50%, -100%) rotate(0deg);"></div>
                                <div id="minute-hand" class="absolute top-1/2 left-1/2 bg-gray-600 z-10" style="width: 0.5px; height: 8px; transform-origin: bottom; transform: translate(-50%, -100%) rotate(0deg);"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ë°”ë‹¥ -->
                    <div class="absolute bottom-0 w-full h-3 bg-gray-400 border-t-2 border-gray-500"></div>
                    
                    <!-- ì°½êµ¬ -->
                    <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-2">
                        ${[0, 1, 2].map(i => `
                            <div class="relative">
                                <div class="w-4 h-3 bg-yellow-800 border border-yellow-600 rounded"></div>
                                
                                <div id="teller-${i}" class="absolute top-0 left-1/2 transform -translate-x-1/2" style="font-size: 8px; margin-top: -12px;">
                                    ğŸ‘¨â€ğŸ’¼
                                </div>
                                
                                <div class="absolute left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-1 rounded text-xs" style="font-size: 0.5rem; bottom: -8px;">
                                    ${i + 1}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- ê³ ê°ë“¤ -->
                    <div id="customer-area" class="absolute bottom-1 left-0 w-full h-4"></div>

                    <!-- ì€í–‰ ê°„íŒ -->
                    <div class="absolute top-1 left-1/2 transform -translate-x-1/2">
                        <div class="bg-blue-800 text-white rounded border border-blue-600 px-2 py-1">
                            <h2 class="text-xs font-bold text-center">${gameState.bankName}</h2>
                        </div>
                    </div>

                    <!-- ê¸ˆë¦¬ ì•ˆë‚´íŒ -->
                    <div class="absolute top-1 right-1 bg-white border border-gray-300 rounded p-1" style="font-size: 0.5rem;">
                        <div class="font-bold text-gray-800 mb-1">ğŸ’° ê¸ˆë¦¬</div>
                        <div class="flex justify-between">
                            <span>ì˜ˆê¸ˆ:</span>
                            <span class="font-bold text-blue-600">${gameState.depositRate}%</span>
                        </div>
                        <div class="flex justify-between">
                            <span>ëŒ€ì¶œ:</span>
                            <span class="font-bold text-green-600">${gameState.loanRate}%</span>
                        </div>
                    </div>
                </div>

                <!-- ë©”ì¸ ì½˜í…ì¸  -->
                <div class="flex-1 overflow-y-auto scrollbar-hide p-2">
                    <!-- í•µì‹¬ ì§€í‘œ -->
                    <div class="mb-2">
                        <h3 class="text-sm font-bold text-gray-800 mb-1">ğŸ“Š ê²½ì˜ í˜„í™©</h3>
                        
                        <!-- ìì‚°/ë¶€ì±„ í˜„í™© -->
                        <div class="grid grid-cols-3 gap-1 mb-2">
                            <div class="bg-blue-100 p-2 rounded">
                                <div class="text-blue-800 font-bold text-xs">ğŸ’° ìˆ˜ì‹ </div>
                                <div class="text-xs">
                                    <div class="flex justify-between">
                                        <span>ê³ ê°:</span>
                                        <span class="font-bold text-blue-600">${gameState.depositCustomers}ëª…</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>ì˜ˆê¸ˆ:</span>
                                        <span class="font-bold text-blue-600">${formatCurrency(gameState.totalDepositBalance)}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-green-100 p-2 rounded">
                                <div class="text-green-800 font-bold text-xs">ğŸ’¸ ì—¬ì‹ </div>
                                <div class="text-xs">
                                    <div class="flex justify-between">
                                        <span>ê³ ê°:</span>
                                        <span class="font-bold text-green-600">${gameState.loanCustomers}ëª…</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>ëŒ€ì¶œ:</span>
                                        <span class="font-bold text-green-600">${formatCurrency(gameState.totalLoanBalance)}</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-yellow-100 p-2 rounded">
                                <div class="text-yellow-800 font-bold text-xs">ğŸ¦ í˜„í™©</div>
                                <div class="text-xs">
                                    <div class="flex justify-between">
                                        <span>ìë³¸:</span>
                                        <span class="font-bold text-yellow-600">${formatCurrency(gameState.currentCapital)}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>ìˆ˜ìµ:</span>
                                        <span class="font-bold ${gameState.totalProfit >= 0 ? 'text-green-600' : 'text-red-600'}">
                                            ${formatCurrency(gameState.totalProfit)}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        ${gameState.currentCapital < gameState.initialCapital * 0.1 ? `
                            <div class="alert alert-danger mb-2">
                                <div class="flex items-center">
                                    <span class="mr-1">âš ï¸</span>
                                    <p class="font-bold text-xs">ìë³¸ê¸ˆ ë¶€ì¡± ê²½ê³ !</p>
                                </div>
                            </div>
                        ` : ''}
                    </div>

                    ${uiState.marketReactions.length > 0 ? `
                        <div class="mb-2">
                            <h3 class="text-xs font-bold text-gray-800 mb-1">ğŸ’¬ ê³ ê° ë°˜ì‘</h3>
                            ${uiState.marketReactions.map(reaction => `
                                <div class="p-1 rounded border-l-2 mb-1 ${
                                    reaction.type === 'positive' ? 'bg-green-50 border-green-400' :
                                    'bg-red-50 border-red-400'
                                }">
                                    <div class="flex items-center">
                                        <span class="text-xs mr-1">${reaction.icon}</span>
                                        <p class="text-xs">${reaction.message}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}

                    ${uiState.currentEvent ? `
                        <div class="alert alert-warning mb-2">
                            <div class="flex items-center">
                                <span class="mr-1">âš ï¸</span>
                                <div>
                                    <h3 class="text-xs font-bold">ğŸ“° ${uiState.currentEvent.name}</h3>
                                    <p class="text-xs">${uiState.currentEvent.effect}</p>
                                </div>
                            </div>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
    }

    // í•˜ë£¨ ë§ˆê° íŒì—… ë Œë”ë§
    function renderDayEndPopup() {
        return `
            <div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-2">
                <div class="bg-blue-900 border-2 border-blue-400 rounded-lg p-3 w-full max-h-full overflow-y-auto scrollbar-hide">
                    <div class="text-center mb-2">
                        <h3 class="text-lg font-bold text-white mb-1">ğŸŒ™ ì˜ì—… ë§ˆê°</h3>
                        <p class="text-blue-200 text-xs">ë‚´ì¼ ì˜ì—…ì„ ì¤€ë¹„í•´ì£¼ì„¸ìš”</p>
                    </div>

                    ${uiState.dayResults ? `
                        <div class="bg-blue-800 p-2 rounded mb-2">
                            <h4 class="text-blue-200 font-bold mb-1 text-xs">ğŸ“Š ì˜¤ëŠ˜ ê²°ê³¼</h4>
                            <div class="text-xs text-blue-100 space-y-1">
                                <div class="grid grid-cols-2 gap-1">
                                    <div>ğŸ“¥ ì˜ˆê¸ˆ: ${Math.round(uiState.dayResults.depositCustomers)}ëª…</div>
                                    <div>ğŸ“¤ ëŒ€ì¶œ: ${Math.round(uiState.dayResults.loanCustomers)}ëª…</div>
                                </div>
                                <div class="border-t border-blue-600 pt-1">
                                    <div class="text-green-300">ğŸ’° ìˆ˜ìµ: ${formatCurrency(uiState.dayResults.assetOperationIncome + uiState.dayResults.loanInterestIncome)}</div>
                                    <div class="text-red-300">ğŸ’¸ ë¹„ìš©: ${formatCurrency(uiState.dayResults.depositInterestCost + uiState.dayResults.defaultLoss + uiState.dayResults.operatingCost)}</div>
                                    <div class="font-bold ${uiState.dayResults.netIncome >= 0 ? 'text-green-300' : 'text-red-300'}">
                                        ğŸ“ˆ ìˆœì´ìµ: ${formatCurrency(uiState.dayResults.netIncome)}
                                    </div>
                                </div>
                                ${uiState.dayResults.capitalShortage ? `
                                    <div class="text-yellow-300 text-xs">
                                        âš ï¸ ìë³¸ê¸ˆ ë¶€ì¡±ìœ¼ë¡œ ëŒ€ì¶œ ì œí•œ
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="space-y-2 mb-3">
                        ${createSlider('deposit-rate-slider', 'ğŸ’° ìˆ˜ì‹  ì´ììœ¨', gameState.depositRate, 1, 5, 0.1, '%', 'depositRate')}
                        ${createSlider('loan-rate-slider', 'ğŸ’¸ ì—¬ì‹  ì´ììœ¨', gameState.loanRate, 3, 10, 0.1, '%', 'loanRate')}
                        ${createSlider('advertising-slider', 'ğŸ“¢ ê´‘ê³ ë¹„', gameState.advertising, 0, 5000000, 100000, 'ì›', 'advertising')}
                    </div>

                    <div class="flex justify-center">
                        <button
                            onclick="processDay()"
                            class="btn btn-primary w-full py-2 text-sm"
                        >
                            ğŸŒ… ë‹¤ìŒ ë‚  ì˜ì—… ì‹œì‘
                        </button>
                    </div>
                </div>
            </div>
        `;
    }

    // ì…ë ¥ ëª¨ë‹¬ ë Œë”ë§
    function renderInputModal() {
        return `
            <div class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-3">
                <div class="bg-white rounded-lg w-full">
                    <div class="p-3">
                        <h3 class="text-base font-bold text-gray-800 mb-2">
                            ${uiState.inputLabel} ì§ì ‘ ì…ë ¥
                        </h3>
                        
                        <div class="mb-3">
                            <label class="block text-xs font-bold text-gray-700 mb-1">
                                ìƒˆë¡œìš´ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”
                            </label>
                            <input
                                type="number"
                                id="modal-input"
                                value="${uiState.inputValue}"
                                onchange="uiState.inputValue = this.value"
                                onkeypress="if(event.key === 'Enter') applyInputValue(); if(event.key === 'Escape') closeInputModal();"
                                class="input text-sm"
                                placeholder="ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                            />
                            <div class="text-xs text-gray-600 mt-1">
                                ${uiState.inputType === 'depositRate' ? 'ë²”ìœ„: 1.0% ~ 5.0%' : ''}
                                ${uiState.inputType === 'loanRate' ? 'ë²”ìœ„: 3.0% ~ 10.0%' : ''}
                                ${uiState.inputType === 'advertising' ? 'ë²”ìœ„: 0ì› ~ 500ë§Œì›' : ''}
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <button
                                onclick="closeInputModal()"
                                class="btn btn-secondary flex-1 text-sm"
                            >
                                ì·¨ì†Œ
                            </button>
                            <button
                                onclick="applyInputValue()"
                                class="btn btn-primary flex-1 text-sm"
                            >
                                ì ìš©
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // ì´ˆê¸°í™”
    function init() {
        render();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', init);
</script>
```

</body>
</html>Currency(val);
                }
                return val + unit;
            };

```
        return `
            <div class="bg-gray-100 p-2 rounded mb-2">
                <div class="flex justify-between items-center mb-1">
                    <label class="font-bold text-gray-800 text-xs">${label}</label>
                    <div class="flex items-center gap-1">
                        <span class="font-mono font-bold text-blue-600 text-xs" id="${id}-value">
                            ${formatValue(value)}
                        </span>
                        <button
                            onclick="openInputModal('${type}', ${value}, '${label}')"
                            class="btn btn-secondary"
                            style="font-size: 0.6rem; padding: 0.125rem 0.25rem;"
                        >
                            ì§ì ‘
                        </button>
                    </div>
                </div>
                
                <input
                    type="range"
                    id="${id}"
                    min="${min}"
                    max="${max}"
                    step="${step}"
                    value="${value}"
                    class="slider w-full"
                    onchange="updateSliderValue('${id}', '${type}', '${unit}')"
                />
            </div>
        `;
    }

    // ìŠ¬ë¼ì´ë” ê°’ ì—…ë°ì´íŠ¸
    function updateSliderValue(id, type, unit) {
        const slider = document.getElementById(id);
        const valueDisplay = document.getElementById(id + '-value');
        
        if (!slider || !valueDisplay) return;
        
        const value = parseFloat(slider.value);
        
        switch (type) {
            case 'depositRate':
                gameState.depositRate = value;
                break;
            case 'loanRate':
                gameState.loanRate = value;
                break;
            case 'advertising':
                gameState.advertising = parseInt(value);
                break;
        }
        
        const formatValue = (val) => {
            if (unit === 'ì›') {
                return format
```